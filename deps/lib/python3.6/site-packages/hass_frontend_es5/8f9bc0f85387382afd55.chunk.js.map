{"version":3,"sources":["webpack:///./src/components/buttons/ha-call-service-button.js","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/common/dom/setup-leaflet-map.js","webpack:///./src/panels/map/ha-entity-marker.js","webpack:///./src/panels/lovelace/components/notifications/hui-notification-item-template.js","webpack:///./src/panels/lovelace/components/notifications/hui-configurator-notification-item.js","webpack:///./src/panels/lovelace/components/notifications/hui-persistent-notification-item.js","webpack:///./src/panels/lovelace/components/notifications/hui-notification-item.js","webpack:///./src/panels/lovelace/common/compute-notifications.js","webpack:///./src/panels/lovelace/components/notifications/hui-notification-drawer.js","webpack:///./src/panels/lovelace/components/notifications/hui-notifications-button.js","webpack:///./src/panels/lovelace/common/compute-unused-entities.js","webpack:///./src/panels/lovelace/common/compute-card-size.js","webpack:///./src/panels/lovelace/cards/hui-conditional-card.js","webpack:///./src/panels/lovelace/components/hui-entities-toggle.js","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entities.js","webpack:///./src/panels/lovelace/components/hui-generic-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-climate-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-cover-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-group-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-input-number-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-input-select-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-input-text-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-lock-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-scene-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-script-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-text-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-timer-entity-row.js","webpack:///./src/panels/lovelace/entity-rows/hui-toggle-entity-row.js","webpack:///./src/panels/lovelace/special-rows/hui-call-service-row.js","webpack:///./src/panels/lovelace/common/call-service.js","webpack:///./src/panels/lovelace/special-rows/hui-divider-row.js","webpack:///./src/panels/lovelace/special-rows/hui-weblink-row.js","webpack:///./src/panels/lovelace/common/create-error-card-config.js","webpack:///./src/panels/lovelace/common/create-row-element.js","webpack:///./src/panels/lovelace/cards/hui-entities-card.js","webpack:///./src/panels/lovelace/common/process-config-entities.js","webpack:///./src/common/entity/valid_entity_id.js","webpack:///./src/panels/lovelace/cards/hui-entity-filter-card.js","webpack:///./src/panels/lovelace/cards/hui-error-card.js","webpack:///./src/panels/lovelace/common/entity/toggle-entity.js","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entity.js","webpack:///./src/panels/lovelace/cards/hui-glance-card.js","webpack:///./src/panels/lovelace/cards/hui-history-graph-card.js","webpack:///./src/panels/lovelace/cards/hui-horizontal-stack-card.js","webpack:///./src/panels/lovelace/cards/hui-iframe-card.js","webpack:///./src/common/util/debounce.js","webpack:///./src/panels/lovelace/cards/hui-map-card.js","webpack:///./src/panels/lovelace/cards/hui-markdown-card.js","webpack:///./src/panels/lovelace/cards/hui-legacy-wrapper-card.js","webpack:///./src/panels/lovelace/cards/hui-media-control-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-card.js","webpack:///./src/panels/lovelace/mixins/element-click-mixin.js","webpack:///./src/panels/lovelace/elements/hui-icon-element.js","webpack:///./src/panels/lovelace/components/hui-image.js","webpack:///./src/panels/lovelace/elements/hui-image-element.js","webpack:///./src/panels/lovelace/elements/hui-service-button-element.js","webpack:///./src/panels/lovelace/elements/hui-state-badge-element.js","webpack:///./src/panels/lovelace/elements/hui-state-icon-element.js","webpack:///./src/panels/lovelace/elements/hui-state-label-element.js","webpack:///./src/panels/lovelace/common/create-hui-element.js","webpack:///./src/panels/lovelace/cards/hui-picture-elements-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-entity-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-glance-card.js","webpack:///./src/panels/lovelace/cards/hui-plant-status-card.js","webpack:///./src/panels/lovelace/cards/hui-vertical-stack-card.js","webpack:///./src/panels/lovelace/cards/hui-weather-forecast-card.js","webpack:///./src/panels/lovelace/common/create-card-element.js","webpack:///./src/panels/lovelace/hui-unused-entities.js","webpack:///./src/panels/lovelace/hui-view.js","webpack:///./src/panels/lovelace/hui-root.js","webpack:///./src/common/dom/scroll-to-target.js","webpack:///./src/panels/lovelace/ha-panel-lovelace.js","webpack:///./src/common/dom/load_resource.js"],"names":["HaCallServiceButton","Object","_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_1__","_createClass","key","value","this","progress","el","eventData","domain","service","serviceData","hass","callService","then","$","actionSuccess","success","actionError","fire","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_0__","a","_templateObject","type","Boolean","String","customElements","define","HaProgressButton","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_3__","className","classList","container","add","setTimeout","remove","_this2","prototype","__proto__","getPrototypeOf","call","addEventListener","ev","buttonTapped","stopPropagation","tempClass","disabled","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_2__","setupLeafletMap","mapElement","map","leaflet__WEBPACK_IMPORTED_MODULE_0___default","style","document","createElement","setAttribute","parentNode","appendChild","setView","tileLayer","Browser","retina","attribution","subdomains","minZoom","maxZoom","addTo","HaEntityMarker","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_2__","badgeTap","entityId","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_1__","entityName","entityPicture","hui_notification_item_template_HuiNotificationItemTemplate","_PolymerElement","HuiNotificationItemTemplate","instance","Constructor","TypeError","apply","arguments","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","polymer_element","get","html_tag","hui_configurator_notification_item_HuiConfiguratorNotificationItem","_EventsMixin","HuiConfiguratorNotificationItem","events_mixin","localize_mixin","hui_configurator_notification_item_createClass","stateObj","entity_id","state","localize","friendlyName","attributes","friendly_name","hui_configurator_notification_item_templateObject","hui_persistent_notification_item_HuiPersistentNotificationItem","_LocalizeMixin","HuiPersistentNotificationItem","hui_persistent_notification_item_createClass","callApi","title","compute_state_name","hui_persistent_notification_item_templateObject","hui_notification_item_HuiNotificationItem","HuiNotificationItem","hui_notification_item_createClass","lastChild","removeChild","tag","compute_domain","observer","NOTIFICATION_DOMAINS","computeNotifications","states","keys","filter","includes","hui_notification_drawer_HuiNotificationDrawer","HuiNotificationDrawer","hui_notification_drawer_createClass","hidden","open","entities","length","clearTimeout","_openTimer","hui_notification_drawer_templateObject","_entities","Array","computed","narrow","reflectToAttribute","notify","hui_notifications_button_HuiNotificationsButton","HuiNotificationsButton","hui_notifications_button_createClass","notificationsOpen","hui_notifications_button_templateObject","EXCLUDED_DOMAINS","computeCardSize","element","getCardSize","hui_conditional_card_createClass","defineProperties","target","props","i","descriptor","defineProperty","protoProps","staticProps","hui_conditional_card_templateObject","freeze","raw","hui_conditional_card_HuiConditionalCard","HuiConditionalCard","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getter","_config","_buildConfig","config","card","isArray","conditions","every","c","entity","state_not","Error","root","createCardElement","_hassChanged","visible","toggle","hui_entities_toggle_HuiEntitiesToggle","hui_entities_toggle_createClass","HuiEntitiesToggle","entityIds","common_const","e","has","split","some","turnOn","checked","domainsToCall","forEach","h","stateDomain","serviceDomain","push","_toggleEntities","hui_entities_toggle_templateObject","hui_generic_entity_row_HuiGenericEntityRow","hui_generic_entity_row_createClass","HuiGenericEntityRow","b","name","hui_generic_entity_row_templateObject","styleTemplate","stateBadgeTemplate","infoTemplate","_templateObject2","_templateObject3","_templateObject4","_stateObj","hui_climate_entity_row_HuiClimateEntityRow","hui_climate_entity_row_createClass","HuiClimateEntityRow","hui_climate_entity_row_templateObject","climateControlTemplate","hui_climate_entity_row_templateObject2","hui_climate_entity_row_templateObject3","hui_cover_entity_row_HuiCoverEntityRow","hui_cover_entity_row_createClass","HuiCoverEntityRow","cover_model","hui_cover_entity_row_templateObject","coverControlTemplate","hui_cover_entity_row_templateObject2","hui_cover_entity_row_templateObject3","_entityObj","hui_group_entity_row_HuiGroupEntityRow","hui_group_entity_row_createClass","HuiGroupEntityRow","compute_state_display","hui_group_entity_row_templateObject","groupControlTemplate","hui_group_entity_row_templateObject2","_canToggle","hui_input_number_entity_row_HuiInputNumberEntityRow","legacy_class","iron_resizable_behavior","hui_input_number_entity_row_createClass","HuiInputNumberEntityRow","ResizeObserver","entries","_hiddenState","observe","input_number_card","mode","width","offsetWidth","stateEl","shadowRoot","querySelector","oldStateObj","setProperties","_min","Number","min","_max","max","_step","step","_value","hui_input_number_entity_row_templateObject","inputNumberControlTemplate","hui_input_number_entity_row_templateObject2","hui_input_number_entity_row_templateObject3","hui_input_select_entity_row_HuiInputSelectEntityRow","hui_input_select_entity_row_createClass","HuiInputSelectEntityRow","options","indexOf","option","hui_input_select_entity_row_templateObject","hui_input_select_entity_row_templateObject2","_selected","hui_input_text_entity_row_HuiInputTextEntityRow","hui_input_text_entity_row_createClass","HuiInputTextEntityRow","hui_input_text_entity_row_templateObject","inputTextControlTemplate","hui_input_text_entity_row_templateObject2","hui_lock_entity_row_HuiLockEntityRow","hui_lock_entity_row_createClass","HuiLockEntityRow","hui_lock_entity_row_templateObject","lockControlTemplate","hui_lock_entity_row_templateObject2","hui_lock_entity_row_templateObject3","hui_scene_entity_row_HuiSceneEntityRow","hui_scene_entity_row_createClass","HuiSceneEntityRow","hui_scene_entity_row_templateObject","sceneControlTemplate","hui_scene_entity_row_templateObject2","hui_scene_entity_row_templateObject3","hui_script_entity_row_HuiScriptEntityRow","hui_script_entity_row_createClass","HuiScriptEntityRow","hui_script_entity_row_templateObject","scriptControlTemplate","hui_script_entity_row_templateObject2","hui_script_entity_row_templateObject3","hui_text_entity_row_HuiTextEntityRow","hui_text_entity_row_createClass","HuiTextEntityRow","hui_text_entity_row_templateObject","textControlTemplate","hui_text_entity_row_templateObject2","hui_text_entity_row_templateObject3","hui_timer_entity_row_HuiTimerEntityRow","hui_timer_entity_row_createClass","HuiTimerEntityRow","_clearInterval","_startInterval","_updateRemaining","clearInterval","_calculateRemaining","setInterval","_timeRemaining","timer_time_remaining","time","display","seconds_to_duration","hui_timer_entity_row_templateObject","timerControlTemplate","hui_timer_entity_row_templateObject2","hui_toggle_entity_row_HuiToggleEntityRow","hui_toggle_entity_row_createClass","HuiToggleEntityRow","hui_toggle_entity_row_templateObject","toggleControlTemplate","hui_toggle_entity_row_templateObject2","hui_call_service_row_HuiCallServiceRow","hui_call_service_row_createClass","HuiCallServiceRow","icon","action_name","service_data","_config$service$split","_config$service$split2","_slicedToArray","assign","hui_call_service_row_templateObject","hui_call_service_row_templateObject2","hui_divider_row_HuiDividerRow","hui_divider_row_createClass","HuiDividerRow","_createDivider","height","background-color","prop","setProperty","hui_divider_row_templateObject","hui_weblink_row_HuiWeblinkRow","hui_weblink_row_createClass","HuiWeblinkRow","url","hui_weblink_row_templateObject","hui_weblink_row_templateObject2","createErrorConfig","error","origConfig","SPECIAL_TYPES","Set","DOMAIN_TO_ELEMENT_TYPE","automation","climate","cover","fan","group","input_boolean","input_number","input_select","input_text","light","lock","scene","script","timer","switch","vacuum","_createElement","setConfig","err","console","_createErrorElement","message","hui_entities_card_HuiEntitiesCard","HuiEntitiesCard","_this","_elements","hui_entities_card_createClass","hui_entities_card_templateObject","show","show_header_toggle","_rows","item","_loop","row","_typeof","startsWith","substr","whenDefined","fire_event","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","next","done","return","items","processConfigEntities","entityConf","index","process_config_entities_typeof","test","hui_entity_filter_card_HuiEntitiesCard","hui_entity_filter_card_createClass","state_filter","_configEntities","_element","_filterRawConfig","_updateCardConfig","tagName","entitiesList","filterState","show_empty","isPanel","hui_error_card_HuiErrorCard","hui_error_card_createClass","HuiErrorCard","obj","JSON","stringify","hui_error_card_templateObject","toggleEntity","hui_glance_card_HuiGlanceCard","hui_glance_card_createClass","HuiGlanceCard","updateStyles","--glance-column-width","column_width","hasHeader","info","model","tap_action","hui_glance_card_slicedToArray","hui_glance_card_templateObject","hui_history_graph_card_HuiHistoryGraphCard","hui_history_graph_card_createClass","HuiHistoryGraphCard","_names","_cacheConfig","cacheKey","sort","join","hoursToShow","hours_to_show","refresh","refresh_interval","hui_history_graph_card_templateObject","_stateHistory","_stateHistoryLoading","hui_horizontal_stack_card_HuiHorizontalStackCard","HuiHorizontalStackCard","hui_horizontal_stack_card_createClass","hui_horizontal_stack_card_templateObject","size","elSize","cards","elements","hui_iframe_card_HuiIframeCard","hui_iframe_card_createClass","HuiIframeCard","paddingTop","aspect_ratio","offsetHeight","hui_iframe_card_templateObject","debounce","func","wait","immediate","timeout","_len","args","_key","context","callNow","leaflet_src_default","Icon","Default","imagePath","hui_map_card_HuiMapCard","HuiMapCard","_debouncedResizeListener","_resetMap","bind","hui_map_card_createClass","hui_map_card_templateObject","hui_map_card_get","ar","Math","floor","_resizeObserver","window","_map","setup_leaflet_map","_drawEntities","_fitMap","unobserve","removeEventListener","invalidateSize","zoom","default_zoom","_mapItems","bounds","latLngBounds","getLatLng","fitBounds","pad","getZoom","setZoom","LatLng","latitude","longitude","marker","mapItems","_stateObj$attributes","passive","radius","entity_picture","gpsAccuracy","gps_accuracy","markerIcon","iconHTML","compute_state_domain","outerHTML","divIcon","html","iconSize","interactive","circle","color","part","hui_markdown_card_HuiMarkdownCard","hui_markdown_card_createClass","HuiMarkdownCard","content","hui_markdown_card_templateObject","noTitle","LegacyWrapperCard","_tag","toUpperCase","_domain","HTMLElement","_ensureElement","createErrorCardConfig","HuiMediaControlCard","hui_legacy_wrapper_card","hui_picture_card_HuiPictureCard","navigate_mixin","hui_picture_card_createClass","HuiPictureCard","image","navigation_path","navigate","hui_picture_card_slicedToArray","hui_picture_card_templateObject","element_click_mixin","mixin","_NavigateMixin","_class","element_click_mixin_createClass","tapAction","element_click_mixin_slicedToArray","stateName","tooltip","hui_icon_element_createClass","hui_icon_element_templateObject","hui_icon_element_HuiIconElement","HuiIconElement","handleClick","hui_image_HuiImage","hui_image_createClass","HuiImage","hui_image_get","cameraImage","_updateCameraImageSrc","stateImage","_imageSrc","brokenImage","_lastImageHeight","newState","_currentState","_updateStateImage","_updateStateFilter","stateImg","_imageFallback","stateFilter","isOff","fn","regeneratorRuntime","mark","_callee","_ref2","contentType","wrap","_context","prev","callWS","content_type","_onImageLoad","_onImageError","_ref","gen","Promise","resolve","reject","arg","hui_image_templateObject","hui_image_element_HuiImageElement","hui_image_element_createClass","HuiImageElement","hui_image_element_templateObject","hui_service_button_element_HuiServiceButtonElement","hui_service_button_element_createClass","HuiServiceButtonElement","hui_service_button_element_slicedToArray","_service","hui_service_button_element_templateObject","hui_state_badge_element_HuiStateBadgeElement","hui_state_badge_element_createClass","HuiStateBadgeElement","_badge","hui_state_icon_element_HuiStateIconElement","hui_state_icon_element_createClass","HuiStateIconElement","hui_state_icon_element_templateObject","hui_state_label_element_HuiStateLabelElement","hui_state_label_element_createClass","HuiStateLabelElement","hui_state_label_element_templateObject","ELEMENT_TYPES","create_hui_element_createElement","create_hui_element_createErrorElement","hui_picture_elements_card_HuiPictureElementsCard","HuiPictureElementsCard","hui_picture_elements_card_createClass","hui_picture_elements_card_templateObject","img","src","create_hui_element_typeof","hui_picture_entity_card_HuiPictureEntityCard","hui_picture_entity_card_createClass","HuiPictureEntityCard","_entityDomain","state_image","camera_image","_oldState","stateLabel","available","_name","_state","show_name","show_state","hui_picture_entity_card_templateObject","STATES_OFF","hui_picture_glance_card_HuiPictureGlanceCard","hui_picture_glance_card_createClass","HuiPictureGlanceCard","dialog","force_dialog","_entitiesDialog","_entitiesToggle","collection","state_icon","hui_picture_glance_card_templateObject","HuiPlantStatusCard","hui_vertical_stack_card_HuiVerticalStackCard","HuiVerticalStackCard","hui_vertical_stack_card_createClass","hui_vertical_stack_card_templateObject","totalSize","HuiWeatherForecastCard","CARD_TYPES","create_card_element_CUSTOM_TYPE_PREFIX","create_card_element_createElement","create_card_element_createErrorElement","create_card_element_typeof","hui_unused_entities_HuiUnusedEntities","hui_unused_entities_createClass","HuiUnusedEntities","usedEntities","addEntityId","views","view","addEntities","badges","badge","computeUsedEntities","excluded_entities","secondary_info","hui_unused_entities_templateObject","hui_view_HUIView","HUIView","_cards","_badges","hui_view_createClass","hui_view_templateObject","columns","cardConfig","columnEntityCount","cardSize","minIndex","val","column","columnEl","apply_themes_on_element","themes","theme","CSS_CACHE","JS_CACHE","hui_root_HUIRoot","HUIRoot","_debouncedConfigChanged","_selectView","_curView","hui_root_createClass","hui_root_templateObject","showMenu","route","routeData","path","prefix","id","parseInt","selected","scroller","animationId","startTime","currentScrollTop","deltaScrollTop","detail","layout","header","scrollTarget","random","Date","now","scrollTop","_currentAnimationId","updateFrame","t","elapsedTime","requestAnimationFrame","viewIndex","background","viewConfig","panel","_loadResources","resources","resource","load_resource","__webpack_require__","importHref","warn","ha_panel_lovelace_Lovelace","ha_panel_lovelace_createClass","Lovelace","_fetchConfig","_updateColumns","mqls","mql","matchMedia","addListener","matchColumns","reduce","cols","matches","_columns","conf","t0","catch","_errorMsg","ha_panel_lovelace_templateObject","_load","attr","onload","onerror","async","rel","d","__webpack_exports__","loadModule","loadCSS","loadJS"],"mappings":"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","file":"8f9bc0f85387382afd55.chunk.js","sourcesContent":["import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-progress-button.js';\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallServiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <ha-progress-button id=\"progress\" progress=\"[[progress]]\" on-click=\"buttonTapped\"><slot></slot></ha-progress-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      domain: {\n        type: String,\n      },\n\n      service: {\n        type: String,\n      },\n\n      serviceData: {\n        type: Object,\n        value: {},\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    var el = this;\n    var eventData = {\n      domain: this.domain,\n      service: this.service,\n      serviceData: this.serviceData,\n    };\n\n    this.hass.callService(this.domain, this.service, this.serviceData)\n      .then(function () {\n        el.progress = false;\n        el.$.progress.actionSuccess();\n        eventData.success = true;\n      }, function () {\n        el.progress = false;\n        el.$.progress.actionError();\n        eventData.success = false;\n      }).then(function () {\n        el.fire('hass-service-called', eventData);\n      });\n  }\n}\n\ncustomElements.define('ha-call-service-button', HaCallServiceButton);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-spinner/paper-spinner.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      .container {\n        position: relative;\n        display: inline-block;\n      }\n\n      paper-button {\n        transition: all 1s;\n      }\n\n      .success paper-button {\n        color: white;\n        background-color: var(--google-green-500);\n        transition: none;\n      }\n\n      .error paper-button {\n        color: white;\n        background-color: var(--google-red-500);\n        transition: none;\n      }\n\n      paper-button[disabled] {\n        color: #c8c8c8;\n      }\n\n      .progress {\n        @apply --layout;\n        @apply --layout-center-center;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n    </style>\n    <div class=\"container\" id=\"container\">\n      <paper-button id=\"button\" disabled=\"[[computeDisabled(disabled, progress)]]\" on-click=\"buttonTapped\">\n        <slot></slot>\n      </paper-button>\n      <template is=\"dom-if\" if=\"[[progress]]\">\n        <div class=\"progress\">\n          <paper-spinner active=\"\"></paper-spinner>\n        </div>\n      </template>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', ev => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass('success');\n  }\n\n  actionError() {\n    this.tempClass('error');\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define('ha-progress-button', HaProgressButton);\n","import Leaflet from 'leaflet';\n\n// Sets up a Leaflet map on the provided DOM element\nexport default function setupLeafletMap(mapElement) {\n  const map = Leaflet.map(mapElement);\n  const style = document.createElement('link');\n  style.setAttribute('href', '/static/images/leaflet/leaflet.css');\n  style.setAttribute('rel', 'stylesheet');\n  mapElement.parentNode.appendChild(style);\n  map.setView([51.505, -0.09], 13);\n  Leaflet.tileLayer(\n    `https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}${Leaflet.Browser.retina ? '@2x.png' : '.png'}`,\n    {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n      subdomains: 'abcd',\n      minZoom: 0,\n      maxZoom: 20,\n    }\n  ).addTo(map);\n\n  return map;\n}\n","import '@polymer/iron-image/iron-image.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaEntityMarker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-positioning\"></style>\n    <style>\n    .marker {\n      vertical-align: top;\n      position: relative;\n      display: block;\n      margin: 0 auto;\n      width: 2.5em;\n      text-align: center;\n      height: 2.5em;\n      line-height: 2.5em;\n      font-size: 1.5em;\n      border-radius: 50%;\n      border: 0.1em solid var(--ha-marker-color, var(--default-primary-color));\n      color: rgb(76, 76, 76);\n      background-color: white;\n    }\n    iron-image {\n      border-radius: 50%;\n    }\n    </style>\n\n    <div class=\"marker\">\n      <template is=\"dom-if\" if=\"[[entityName]]\">[[entityName]]</template>\n      <template is=\"dom-if\" if=\"[[entityPicture]]\">\n        <iron-image sizing=\"cover\" class=\"fit\" src=\"[[entityPicture]]\"></iron-image>\n      </template>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entityId: {\n        type: String,\n        value: '',\n      },\n\n      entityName: {\n        type: String,\n        value: null,\n      },\n\n      entityPicture: {\n        type: String,\n        value: null,\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', ev => this.badgeTap(ev));\n  }\n\n  badgeTap(ev) {\n    ev.stopPropagation();\n    if (this.entityId) {\n      this.fire('hass-more-info', { entityId: this.entityId });\n    }\n  }\n}\n\ncustomElements.define('ha-entity-marker', HaEntityMarker);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../../components/ha-card.js';\n\nexport class HuiNotificationItemTemplate extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      .contents {\n        padding: 16px;\n      }\n   \n      ha-card .header {\n        @apply --paper-font-headline;\n        color: var(--primary-text-color);\n        padding: 16px 16px 0;\n      }\n\n      .actions {\n        border-top: 1px solid #e8e8e8;\n        padding: 5px 16px;\n      }\n\n      ::slotted(.primary) {\n        color: var(--primary-color);\n      }\n    </style>\n    <ha-card>\n      <div class=\"header\">\n        <slot name=\"header\"></slot>\n      </div>\n      <div class=\"contents\">\n        <slot></slot>\n      </div>\n      <div class=\"actions\">\n        <slot name=\"actions\"></slot>\n      </div>\n    </ha-card>\n    `;\n  }\n}\ncustomElements.define('hui-notification-item-template', HuiNotificationItemTemplate);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './hui-notification-item-template.js';\n\nimport EventsMixin from '../../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nexport class HuiConfiguratorNotificationItem extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <hui-notification-item-template>\n      <span slot=\"header\">[[localize('domain.configurator')]]</span>\n      \n      <div>[[_getMessage(stateObj)]]</div> \n      \n      <paper-button \n        slot=\"actions\" \n        class=\"primary\" \n        on-click=\"_handleClick\"\n      >[[_localizeState(stateObj.state)]]</paper-button>\n    </hui-notification-item-template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object\n    };\n  }\n\n  _handleClick() {\n    this.fire('hass-more-info', { entityId: this.stateObj.entity_id });\n  }\n\n  _localizeState(state) {\n    return this.localize(`state.configurator.${state}`);\n  }\n\n  _getMessage(stateObj) {\n    const friendlyName = stateObj.attributes.friendly_name;\n    return this.localize('ui.notification_drawer.click_to_configure', 'entity', friendlyName);\n  }\n}\ncustomElements.define('hui-configurator-notification-item', HuiConfiguratorNotificationItem);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeStateName from '../../../../common/entity/compute_state_name.js';\n\nimport '../../../../components/ha-markdown.js';\nimport './hui-notification-item-template.js';\n\nimport LocalizeMixin from '../../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nexport class HuiPersistentNotificationItem extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <hui-notification-item-template>\n      <span slot=\"header\">[[_computeTitle(stateObj)]]</span>\n      \n      <ha-markdown content=\"[[stateObj.attributes.message]]\"></ha-markdown>\n      \n      <paper-button \n        slot=\"actions\" \n        class=\"primary\" \n        on-click=\"_handleDismiss\"\n      >[[localize('ui.card.persistent_notification.dismiss')]]</paper-button>\n    </hui-notification-item-template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: Object\n    };\n  }\n\n  _handleDismiss() {\n    this.hass.callApi('DELETE', `states/${this.stateObj.entity_id}`);\n  }\n\n  _computeTitle(stateObj) {\n    return (stateObj.attributes.title || computeStateName(stateObj));\n  }\n}\ncustomElements.define(\n  'hui-persistent_notification-notification-item',\n  HuiPersistentNotificationItem\n);\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport computeDomain from '../../../../common/entity/compute_domain.js';\n\nimport './hui-configurator-notification-item.js';\nimport './hui-persistent-notification-item.js';\n\nexport class HuiNotificationItem extends PolymerElement {\n  static get properties() {\n    return {\n      hass: Object,\n      stateObj: {\n        type: Object,\n        observer: '_stateChanged'\n      }\n    };\n  }\n\n  _stateChanged(stateObj) {\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    if (!stateObj) return;\n\n    const domain = computeDomain(stateObj.entity_id);\n    const tag = `hui-${domain}-notification-item`;\n    const el = document.createElement(tag);\n    el.hass = this.hass;\n    el.stateObj = stateObj;\n    this.appendChild(el);\n  }\n}\ncustomElements.define('hui-notification-item', HuiNotificationItem);\n","import computeDomain from '../../../common/entity/compute_domain.js';\n\nconst NOTIFICATION_DOMAINS = [\n  'configurator',\n  'persistent_notification'\n];\n\nexport default function computeNotifications(states) {\n  return Object.keys(states)\n    .filter(entityId => NOTIFICATION_DOMAINS.includes(computeDomain(entityId)))\n    .map(entityId => states[entityId]);\n}\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './hui-notification-item.js';\n\nimport computeNotifications from '../../common/compute-notifications.js';\n\nimport EventsMixin from '../../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nexport class HuiNotificationDrawer extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include=\"paper-material-styles\">\n      :host {\n        bottom: 0;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n      }\n\n      :host([hidden]) {\n        display: none;\n      }\n \n      .container {\n        align-items: stretch;\n        background: var(--sidebar-background-color, var(--primary-background-color));\n        bottom: 0;\n        box-shadow: var(--paper-material-elevation-1_-_box-shadow);\n        display: flex;\n        flex-direction: column;\n        overflow-y: hidden;\n        position: fixed;\n        top: 0;\n        transition: right .2s ease-in;\n        width: 500px;\n        z-index: 10;\n      }\n\n      :host(:not(narrow)) .container {\n        right: -500px;\n      }\n\n      :host([narrow]) .container {\n        right: -100%;\n        width: 100%;\n      }\n\n      :host(.open) .container,\n      :host(.open[narrow]) .container {\n        right: 0;\n      }\n\n      app-toolbar {\n        color: var(--primary-text-color);\n        border-bottom: 1px solid var(--divider-color);\n        background-color: var(--primary-background-color);\n        min-height: 64px;\n        width: calc(100% - 32px);\n        z-index: 11;\n      }\n\n      .overlay {\n        display: none;\n      }\n\n      :host(.open) .overlay {\n        bottom: 0;\n        display: block;\n        left: 0;\n        position: absolute;\n        right: 0;\n        top: 0;\n        z-index: 5;\n      }\n \n      .notifications {\n        overflow-y: auto;\n        padding-top: 16px;\n      }\n      \n      .notification {\n        padding: 0 16px 16px;\n      }\n\n      .empty {\n        padding: 16px;\n        text-align: center;\n      }\n    </style>\n    <div class=\"overlay\" on-click=\"_closeDrawer\"></div>\n    <div class=\"container\">\n      <app-toolbar>\n        <div main-title>[[localize('ui.notification_drawer.title')]]</div>\n        <paper-icon-button icon=\"hass:chevron-right\" on-click=\"_closeDrawer\"></paper-icon-button>\n      </app-toolbar>\n      <div class=\"notifications\">\n        <template is=\"dom-if\" if=\"[[!_empty(_entities)]]\">\n          <dom-repeat items=\"[[_entities]]\">\n            <template>\n              <div class=\"notification\">\n                <hui-notification-item hass=\"[[hass]]\" state-obj=\"[[item]]\"></hui-notification-item>\n              </div>\n            </template>\n          </dom-repeat>\n        </template>\n        <template is=\"dom-if\" if=\"[[_empty(_entities)]]\">\n          <div class=\"empty\">[[localize('ui.notification_drawer.empty')]]<div>\n        </template>\n      </div>\n    </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _entities: {\n        type: Array,\n        computed: '_getEntities(hass.states, hidden)'\n      },\n      narrow: {\n        type: Boolean,\n        reflectToAttribute: true\n      },\n      open: {\n        type: Boolean,\n        notify: true,\n        observer: '_openChanged'\n      },\n      hidden: {\n        type: Boolean,\n        value: true,\n        reflectToAttribute: true\n      }\n    };\n  }\n\n  _getEntities(states, hidden) {\n    return (states && !hidden) ? computeNotifications(states) : [];\n  }\n\n  _closeDrawer(ev) {\n    ev.stopPropagation();\n    this.open = false;\n  }\n\n  _empty(entities) {\n    return entities.length === 0;\n  }\n\n  _openChanged(open) {\n    clearTimeout(this._openTimer);\n    if (open) {\n      // Render closed then animate open\n      this.hidden = false;\n      this._openTimer = setTimeout(() => {\n        this.classList.add('open');\n      }, 50);\n    } else {\n      // Animate closed then hide\n      this.classList.remove('open');\n      this._openTimer = setTimeout(() => {\n        this.hidden = true;\n      }, 250);\n    }\n  }\n}\ncustomElements.define('hui-notification-drawer', HuiNotificationDrawer);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeNotifications from '../../common/compute-notifications.js';\n\nimport EventsMixin from '../../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nexport class HuiNotificationsButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        position: relative;\n      }\n \n      .indicator {\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        width: 10px;\n        height: 10px;\n        border-radius: 50%;\n        background: var(--accent-color);\n        pointer-events: none;\n      }\n\n      .indicator[hidden] {\n        display: none;\n      }\n    </style>\n    <paper-icon-button icon=\"hass:bell\" on-click=\"_clicked\"></paper-icon-button>\n    <span class=\"indicator\" hidden$=\"[[!_hasNotifications(hass.states)]]\"></span>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      notificationsOpen: {\n        type: Boolean,\n        notify: true\n      }\n    };\n  }\n\n  _clicked() {\n    this.notificationsOpen = true;\n  }\n\n  _hasNotifications(states) {\n    return computeNotifications(states).length > 0;\n  }\n}\ncustomElements.define('hui-notifications-button', HuiNotificationsButton);\n","const EXCLUDED_DOMAINS = [\n  'zone'\n];\n\nfunction computeUsedEntities(config) {\n  const entities = new Set();\n\n  function addEntityId(entity) {\n    if (typeof entity === 'string') {\n      entities.add(entity);\n    } else if (entity.entity) {\n      entities.add(entity.entity);\n    }\n  }\n\n  function addEntities(obj) {\n    if (obj.entity) addEntityId(obj.entity);\n    if (obj.entities) obj.entities.forEach(entity => addEntityId(entity));\n    if (obj.card) addEntities(obj.card);\n    if (obj.cards) obj.cards.forEach(card => addEntities(card));\n    if (obj.badges) obj.badges.forEach(badge => addEntityId(badge));\n  }\n\n  config.views.forEach(view => addEntities(view));\n  return entities;\n}\n\nexport default function computeUnusedEntities(hass, config) {\n  const usedEntities = computeUsedEntities(config);\n  return Object.keys(hass.states).filter(entity => !usedEntities.has(entity) &&\n    !(config.excluded_entities && config.excluded_entities.includes(entity)) &&\n    !EXCLUDED_DOMAINS.includes(entity.split('.', 1)[0])).sort();\n}\n","export default function computeCardSize(element) {\n  return typeof element.getCardSize === 'function' ? element.getCardSize() : 1;\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeCardSize from '../common/compute-card-size.js';\nimport createCardElement from '../common/create-card-element.js';\n\nclass HuiConditionalCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        .hidden {\n          display: none;\n        }\n      </style>\n      <div id=\"card\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      _config: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  setConfig(config) {\n    if (!config || !config.card || !Array.isArray(config.conditions) ||\n        !config.conditions.every(c => c.entity && (c.state || c.state_not))) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n    const root = this.$.card;\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const element = createCardElement(config.card);\n    element.hass = this.hass;\n    root.appendChild(element);\n    if (this.hass) this._hassChanged(this.hass);\n  }\n\n  getCardSize() {\n    const el = this.$.card && this.$.card.lastChild;\n    return el ? computeCardSize(el) : 1;\n  }\n\n  _hassChanged(hass) {\n    const root = this.$.card;\n    if (!root || !root.lastChild) return;\n\n    root.lastChild.hass = hass;\n\n    const conditions = this._config.conditions;\n    const visible = conditions.every((c) => {\n      if (c.entity in hass.states) {\n        if (c.state) return hass.states[c.entity].state === c.state;\n        return hass.states[c.entity].state !== c.state_not;\n      }\n      return false;\n    });\n    root.classList.toggle('hidden', !visible);\n  }\n}\ncustomElements.define('hui-conditional-card', HuiConditionalCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-toggle-button/paper-toggle-button.js';\n\nimport { DOMAINS_TOGGLE } from '../../../common/const.js';\nimport turnOnOffEntities from '../common/entity/turn-on-off-entities.js';\n\nclass HuiEntitiesToggle extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        width: 38px;\n        display: block;\n      }\n      paper-toggle-button {\n        cursor: pointer;\n        --paper-toggle-button-label-spacing: 0;\n        padding: 13px 5px;\n        margin: -4px -5px;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[_toggleEntities.length]]\">\n      <paper-toggle-button checked=\"[[_computeIsChecked(hass, _toggleEntities)]]\" on-change=\"_callService\"></paper-toggle-button>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      entities: Array,\n      _toggleEntities: {\n        type: Array,\n        computed: '_computeToggleEntities(hass, entities)'\n      }\n    };\n  }\n\n  _computeToggleEntities(hass, entityIds) {\n    return entityIds.filter(entityId => (entityId in hass.states &&\n      DOMAINS_TOGGLE.has(entityId.split('.', 1)[0])));\n  }\n\n  _computeIsChecked(hass, entityIds) {\n    return entityIds.some(entityId => hass.states[entityId].state === 'on');\n  }\n\n  _callService(ev) {\n    const turnOn = ev.target.checked;\n    turnOnOffEntities(this.hass, this._toggleEntities, turnOn);\n  }\n}\n\ncustomElements.define('hui-entities-toggle', HuiEntitiesToggle);\n","import { STATES_OFF } from '../../../../common/const.js';\nimport computeDomain from '../../../../common/entity/compute_domain.js';\n\nexport default function turnOnOffEntities(hass, entityIds, turnOn = true) {\n  const domainsToCall = {};\n  entityIds.forEach((entityId) => {\n    if ((STATES_OFF.includes(hass.states[entityId].state)) === turnOn) {\n      const stateDomain = computeDomain(entityId);\n      const serviceDomain = ['cover', 'lock'].includes(stateDomain) ?\n        stateDomain : 'homeassistant';\n\n      if (!(serviceDomain in domainsToCall)) domainsToCall[serviceDomain] = [];\n      domainsToCall[serviceDomain].push(entityId);\n    }\n  });\n\n  Object.keys(domainsToCall).forEach((domain) => {\n    let service;\n    switch (domain) {\n      case 'lock':\n        service = turnOn ? 'unlock' : 'lock';\n        break;\n      case 'cover':\n        service = turnOn ? 'open_cover' : 'close_cover';\n        break;\n      default:\n        service = turnOn ? 'turn_on' : 'turn_off';\n    }\n\n    const entities = domainsToCall[domain];\n    hass.callService(domain, service, { entity_id: entities });\n  });\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/entity/state-badge.js';\nimport '../../../components/ha-relative-time.js';\nimport '../../../components/ha-icon.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\n\nclass HuiGenericEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <template is=\"dom-if\" if=\"[[_stateObj]]\">\n        ${this.stateBadgeTemplate}\n        <div class=\"flex\">\n          ${this.infoTemplate}\n          <slot></slot>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[!_stateObj]]\">\n        <div class=\"not-found\">\n          Entity not available: [[config.entity]]\n        </div>\n      </template>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n        }\n        .flex {\n          flex: 1;\n          margin-left: 16px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          min-width: 0;\n        }\n        .info {\n          flex: 1 0 60px;\n        }\n        .info,\n        .info > * {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        .flex ::slotted(*) {\n          margin-left: 8px;\n          min-width: 0;\n        }\n        .secondary,\n        ha-relative-time {\n          display: block;\n          color: var(--secondary-text-color);\n        }\n        .not-found {\n          flex: 1;\n          background-color: yellow;\n          padding: 8px;\n        }\n        state-badge {\n          flex: 0 0 40px;\n        }\n      </style>\n    `;\n  }\n\n  static get stateBadgeTemplate() {\n    return html`\n      <state-badge\n        state-obj=\"[[_stateObj]]\"\n        override-icon=\"[[config.icon]]\"\n      ></state-badge>\n    `;\n  }\n\n  static get infoTemplate() {\n    return html`\n      <div class=\"info\">\n        [[_computeName(config.name, _stateObj)]]\n        <template is=\"dom-if\" if=\"[[config.secondary_info]]\">\n          <template is=\"dom-if\" if=\"[[_equals(config.secondary_info, 'entity-id')]]\">\n            <div class=\"secondary\">\n              [[_stateObj.entity_id]]\n            </div>\n          </template>\n          <template is=\"dom-if\" if=\"[[_equals(config.secondary_info, 'last-changed')]]\">\n            <ha-relative-time\n              hass=\"[[hass]]\"\n              datetime=\"[[_stateObj.last_changed]]\"\n            ></ha-relative-time>\n          </template>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, config.entity)'\n      }\n    };\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeName(name, stateObj) {\n    return name || computeStateName(stateObj);\n  }\n}\ncustomElements.define('hui-generic-entity-row', HuiGenericEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-climate-state.js';\nimport '../components/hui-generic-entity-row.js';\n\nclass HuiClimateEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        ${this.climateControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        ha-climate-state {\n          text-align: right;\n        }\n      </style>\n    `;\n  }\n\n  static get climateControlTemplate() {\n    return html`\n      <ha-climate-state\n        hass=\"[[hass]]\"\n        state-obj=\"[[_stateObj]]\"\n      ></ha-climate-state>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-climate-entity-row', HuiClimateEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/ha-cover-controls.js';\nimport '../../../components/ha-cover-tilt-controls.js';\nimport CoverEntity from '../../../util/cover-model.js';\n\nclass HuiCoverEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        ${this.coverControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        ha-cover-controls,\n        ha-cover-tilt-controls {\n          margin-right: -.57em;\n        }\n      </style>\n    `;\n  }\n\n  static get coverControlTemplate() {\n    return html`\n      <template is=\"dom-if\" if=\"[[!_entityObj.isTiltOnly]]\">\n        <ha-cover-controls hass=\"[[hass]]\" state-obj=\"[[_stateObj]]\"></ha-cover-controls>\n      </template>\n      <template is=\"dom-if\" if=\"[[_entityObj.isTiltOnly]]\">\n        <ha-cover-tilt-controls hass=\"[[hass]]\" state-obj=\"[[_stateObj]]\"></ha-cover-tilt-controls>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      },\n      _entityObj: {\n        type: Object,\n        computed: '_computeEntityObj(hass, _stateObj)'\n      },\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeEntityObj(hass, stateObj) {\n    return stateObj ? new CoverEntity(hass, stateObj) : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-cover-entity-row', HuiCoverEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/entity/ha-entity-toggle.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport { DOMAINS_TOGGLE } from '../../../common/const.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiGroupEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        ${this.groupControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get groupControlTemplate() {\n    return html`\n      <template is=\"dom-if\" if=\"[[_canToggle]]\">\n        <ha-entity-toggle\n          hass=\"[[hass]]\"\n          state-obj=\"[[_stateObj]]\"\n        ></ha-entity-toggle>\n      </template>\n      <template is=\"dom-if\" if=\"[[!_canToggle]]\">\n        <div>\n          [[_computeState(_stateObj)]]\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      },\n      _canToggle: {\n        type: Boolean,\n        computed: '_computeCanToggle(_stateObj.attributes.entity_id)'\n      }\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeCanToggle(entityIds) {\n    return entityIds.some(entityId => DOMAINS_TOGGLE.has(entityId.split('.', 1)[0]));\n  }\n\n  _computeState(stateObj) {\n    return computeStateDisplay(this.localize, stateObj);\n  }\n}\ncustomElements.define('hui-group-entity-row', HuiGroupEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-input/paper-input.js';\nimport '@polymer/paper-slider/paper-slider.js';\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nclass HuiInputNumberEntityRow extends mixinBehaviors([IronResizableBehavior], PolymerElement) {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n        id=\"input_number_card\"\n      >\n        ${this.inputNumberControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        .flex {\n          display: flex;\n          align-items: center;\n        }\n        .state {\n          min-width: 45px;\n          text-align: center;\n        }\n        paper-input {\n          text-align: right;\n        }\n      </style>\n    `;\n  }\n\n  static get inputNumberControlTemplate() {\n    return html`\n      <div>\n        <template is=\"dom-if\" if=\"[[_equals(_stateObj.attributes.mode, 'slider')]]\">\n          <div class=\"flex\">\n            <paper-slider\n              min=\"[[_min]]\"\n              max=\"[[_max]]\"\n              value=\"{{_value}}\"\n              step=\"[[_step]]\"\n              pin\n              on-change=\"_selectedValueChanged\"\n              ignore-bar-touch\n            ></paper-slider>\n            <span class=\"state\">[[_value]] [[_stateObj.attributes.unit_of_measurement]]</span>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(_stateObj.attributes.mode, 'box')]]\">\n          <paper-input\n            no-label-float\n            auto-validate\n            pattern=\"[0-9]+([\\\\.][0-9]+)?\"\n            step=\"[[_step]]\"\n            min=\"[[_min]]\"\n            max=\"[[_max]]\"\n            value=\"{{_value}}\"\n            type=\"number\"\n            on-change=\"_selectedValueChanged\"\n          ></paper-input>\n        </template>\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)',\n        observer: '_stateObjChanged'\n      },\n      _min: {\n        type: Number,\n        value: 0\n      },\n      _max: {\n        type: Number,\n        value: 100\n      },\n      _step: Number,\n      _value: Number\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (typeof ResizeObserver === 'function') {\n      const ro = new ResizeObserver((entries) => {\n        entries.forEach(() => {\n          this._hiddenState();\n        });\n      });\n      ro.observe(this.$.input_number_card);\n    } else {\n      this.addEventListener('iron-resize', this._hiddenState);\n    }\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _hiddenState() {\n    if (!this.$ || this._stateObj.attributes.mode !== 'slider') return;\n    const width = this.$.input_number_card.offsetWidth;\n    const stateEl = this.shadowRoot.querySelector('.state');\n    if (!stateEl) return;\n    stateEl.hidden = width <= 350;\n  }\n\n  _stateObjChanged(stateObj, oldStateObj) {\n    this.setProperties({\n      _min: Number(stateObj.attributes.min),\n      _max: Number(stateObj.attributes.max),\n      _step: Number(stateObj.attributes.step),\n      _value: Number(stateObj.state)\n    });\n    if (oldStateObj && stateObj.attributes.mode === 'slider' && oldStateObj.attributes.mode !== 'slider') {\n      this._hiddenState();\n    }\n  }\n\n  _selectedValueChanged() {\n    if (this._value === Number(this._stateObj.state)) return;\n\n    this.hass.callService('input_number', 'set_value', {\n      value: this._value,\n      entity_id: this._stateObj.entity_id,\n    });\n  }\n}\ncustomElements.define('hui-input-number-entity-row', HuiInputNumberEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-dropdown-menu/paper-dropdown-menu.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\n\nimport '../../../components/entity/state-badge.js';\n\nimport computeStateName from '../../../common/entity/compute_state_name.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HuiInputSelectEntityRow extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <template is=\"dom-if\" if=\"[[_stateObj]]\">\n        <state-badge state-obj=\"[[_stateObj]]\"></state-badge>\n        <paper-dropdown-menu on-click=\"_stopPropagation\" selected-item-label=\"{{_selected}}\" label=\"[[_computeName(_config.name, _stateObj)]]\">\n          <paper-listbox slot=\"dropdown-content\" selected=\"[[_computeSelected(_stateObj)]]\">\n            <template is=\"dom-repeat\" items=\"[[_stateObj.attributes.options]]\">\n              <paper-item>[[item]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </template>\n      <template is=\"dom-if\" if=\"[[!_stateObj]]\">\n        <div class=\"not-found\">\n          Entity not available: [[_config.entity]]\n        </div>\n      </template>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n        }\n        paper-dropdown-menu {\n          margin-left: 16px;\n          flex: 1;\n        }\n        .not-found {\n          flex: 1;\n          background-color: yellow;\n          padding: 8px;\n        }\n      </style>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      },\n      _selected: {\n        type: String,\n        observer: '_selectedChanged',\n      },\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeName(name, stateObj) {\n    return name || computeStateName(stateObj);\n  }\n\n  _computeSelected(stateObj) {\n    return stateObj.attributes.options.indexOf(stateObj.state);\n  }\n\n  _selectedChanged(option) {\n    // Selected Option will transition to '' before transitioning to new value\n    if (option === '' || option === this._stateObj.state) {\n      return;\n    }\n    this.hass.callService('input_select', 'select_option', {\n      option: option,\n      entity_id: this._stateObj.entity_id,\n    });\n  }\n\n  _stopPropagation(ev) {\n    ev.stopPropagation();\n  }\n}\ncustomElements.define('hui-input-select-entity-row', HuiInputSelectEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-input/paper-input.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nclass HuiInputTextEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        ${this.inputTextControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get inputTextControlTemplate() {\n    return html`\n      <paper-input\n        no-label-float\n        minlength=\"[[_stateObj.attributes.min]]\"\n        maxlength=\"[[_stateObj.attributes.max]]\"\n        value=\"{{_value}}\"\n        auto-validate=\"[[_stateObj.attributes.pattern]]\"\n        pattern=\"[[_stateObj.attributes.pattern]]\"\n        type=\"[[_stateObj.attributes.mode]]\"\n        on-change=\"_selectedValueChanged\"\n        placeholder=\"(empty value)\"\n      ></paper-input>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)',\n        observer: '_stateObjChanged',\n      },\n      _value: String\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _stateObjChanged(stateObj) {\n    this._value = stateObj.state;\n  }\n\n  _selectedValueChanged() {\n    if (this._value === this._stateObj.state) {\n      return;\n    }\n    this.hass.callService('input_text', 'set_value', {\n      value: this._value,\n      entity_id: this._stateObj.entity_id,\n    });\n  }\n}\ncustomElements.define('hui-input-text-entity-row', HuiInputTextEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiLockEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        ${this.lockControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin-right: -.57em;\n        }\n      </style>\n    `;\n  }\n\n  static get lockControlTemplate() {\n    return html`\n      <paper-button on-click=\"_callService\">\n        [[_computeButtonTitle(_stateObj.state)]]\n      </paper-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeButtonTitle(state) {\n    return state === 'locked' ?\n      this.localize('ui.card.lock.unlock') : this.localize('ui.card.lock.lock');\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    const stateObj = this._stateObj;\n    this.hass.callService('lock', stateObj.state === 'locked' ?\n      'unlock' : 'lock', { entity_id: stateObj.entity_id });\n  }\n}\ncustomElements.define('hui-lock-entity-row', HuiLockEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiSceneEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        ${this.sceneControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin-right: -.57em;\n        }\n      </style>\n    `;\n  }\n\n  static get sceneControlTemplate() {\n    return html`\n      <paper-button on-click=\"_callService\">\n        [[localize('ui.card.scene.activate')]]\n      </paper-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    this.hass.callService('scene', 'turn_on', { entity_id: this._config.entity });\n  }\n}\ncustomElements.define('hui-scene-entity-row', HuiSceneEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/entity/ha-entity-toggle.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiScriptEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        ${this.scriptControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin-right: -.57em;\n        }\n      </style>\n    `;\n  }\n\n  static get scriptControlTemplate() {\n    return html`\n      <template is=\"dom-if\" if=\"[[_stateObj.attributes.can_cancel]]\">\n        <ha-entity-toggle state-obj=\"[[_stateObj]]\" hass=\"[[hass]]\"></ha-entity-toggle>\n      </template>\n      <template is=\"dom-if\" if=\"[[!_stateObj.attributes.can_cancel]]\">\n        <paper-button on-click=\"_callService\">[[localize('ui.card.script.execute')]]</paper-button>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _callService(ev) {\n    ev.stopPropagation();\n    this.hass.callService('script', 'turn_on', { entity_id: this._config.entity });\n  }\n}\ncustomElements.define('hui-script-entity-row', HuiScriptEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiTextEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        ${this.textControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        div {\n          text-align: right;\n        }\n      </style>\n    `;\n  }\n\n  static get textControlTemplate() {\n    return html`\n      <div>\n        [[_computeState(_stateObj)]]\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n\n  _computeState(stateObj) {\n    return computeStateDisplay(this.localize, stateObj);\n  }\n}\ncustomElements.define('hui-text-entity-row', HuiTextEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\n\nimport timerTimeRemaining from '../../../common/entity/timer_time_remaining.js';\nimport secondsToDuration from '../../../common/datetime/seconds_to_duration.js';\n\nclass HuiTimerEntityRow extends PolymerElement {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        ${this.timerControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get timerControlTemplate() {\n    return html`\n      <div>\n        [[_computeDisplay(_stateObj, _timeRemaining)]]\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)',\n        observer: '_stateObjChanged'\n      },\n      _timeRemaining: Number\n    };\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this._clearInterval();\n  }\n\n  _stateObjChanged(stateObj) {\n    if (stateObj) {\n      this._startInterval(stateObj);\n    } else {\n      this._clearInterval();\n    }\n  }\n\n  _clearInterval() {\n    if (this._updateRemaining) {\n      clearInterval(this._updateRemaining);\n      this._updateRemaining = null;\n    }\n  }\n\n  _startInterval(stateObj) {\n    this._clearInterval();\n    this._calculateRemaining(stateObj);\n\n    if (stateObj.state === 'active') {\n      this._updateRemaining = setInterval(() => this._calculateRemaining(this._stateObj), 1000);\n    }\n  }\n\n  _calculateRemaining(stateObj) {\n    this._timeRemaining = timerTimeRemaining(stateObj);\n  }\n\n  _computeDisplay(stateObj, time) {\n    if (stateObj.state === 'idle' || time === 0) return stateObj.state;\n\n    let display = secondsToDuration(time);\n\n    if (stateObj.state === 'paused') {\n      display += ' (paused)';\n    }\n\n    return display;\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-timer-entity-row', HuiTimerEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-generic-entity-row.js';\nimport '../../../components/entity/ha-entity-toggle.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiToggleEntityRow extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <hui-generic-entity-row\n        hass=\"[[hass]]\"\n        config=\"[[_config]]\"\n      >\n        ${this.toggleControlTemplate}\n      </hui-generic-entity-row>\n    `;\n  }\n\n  static get toggleControlTemplate() {\n    return html`\n      <template is=\"dom-if\" if=\"[[_canToggle]]\">\n        <ha-entity-toggle\n          hass=\"[[hass]]\"\n          state-obj=\"[[_stateObj]]\"\n        ></ha-entity-toggle>\n      </template>\n      <template is=\"dom-if\" if=\"[[!_canToggle]]\">\n        <div>\n          [[_computeState(_stateObj)]]\n        </div>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _stateObj: {\n        type: Object,\n        computed: '_computeStateObj(hass.states, _config.entity)'\n      },\n      _canToggle: {\n        type: Boolean,\n        computed: '_computeCanToggle(_stateObj.state)'\n      }\n    };\n  }\n\n  _computeStateObj(states, entityId) {\n    return states && entityId in states ? states[entityId] : null;\n  }\n\n  _computeCanToggle(state) {\n    return state === 'on' || state === 'off';\n  }\n\n  _computeState(stateObj) {\n    return stateObj && computeStateDisplay(this.localize, stateObj);\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Entity not configured.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-toggle-entity-row', HuiToggleEntityRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../../../components/ha-icon.js';\nimport callService from '../common/call-service.js';\n\nclass HuiCallServiceRow extends PolymerElement {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <ha-icon icon=\"[[_config.icon]]\"></ha-icon>\n      <div class=\"flex\">\n        <div>\n          [[_config.name]]\n        </div>\n        <paper-button on-click=\"_callService\">[[_config.action_name]]</paper-button>\n      </div>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          align-items: center;\n        }\n        ha-icon {\n          padding: 8px;\n          color: var(--paper-item-icon-color);\n        }\n        .flex {\n          flex: 1;\n          overflow: hidden;\n          margin-left: 16px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        .flex div {\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n          margin-right: -.57em;\n        }\n      </style>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.icon || !config.name || !config.action_name ||\n        !config.service || !config.service_data) {\n      throw new Error('Error in card configuration.');\n    }\n    this._config = config;\n  }\n\n  _callService() {\n    callService(this._config, this.hass);\n  }\n}\ncustomElements.define('hui-call-service-row', HuiCallServiceRow);\n","export default function callService(config, hass) {\n  const entityId = config.entity;\n  const [domain, service] = config.service.split('.', 2);\n  const serviceData = Object.assign(\n    {}, { entity_id: entityId },\n    config.service_data\n  );\n  hass.callService(domain, service, serviceData);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HuiDividerRow extends PolymerElement {\n  static get template() {\n    return html``;\n  }\n\n  setConfig(config) {\n    if (!config) {\n      throw new Error('Error in card configuration.');\n    }\n    this._config = config;\n    this._createDivider();\n  }\n\n  ready() {\n    super.ready();\n    this._createDivider();\n  }\n\n  _createDivider() {\n    const root = this.shadowRoot;\n    if (root === null) return;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const style = this._config.style || {\n      height: '1px',\n      'background-color': 'var(--secondary-text-color)'\n    };\n\n    const el = document.createElement('div');\n    Object.keys(style).forEach((prop) => {\n      el.style.setProperty(prop, style[prop]);\n    });\n\n    root.appendChild(el);\n  }\n}\ncustomElements.define('hui-divider-row', HuiDividerRow);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-icon.js';\n\nclass HuiWeblinkRow extends PolymerElement {\n  static get template() {\n    return html`\n      ${this.styleTemplate}\n      <a href=\"[[_config.url]]\">\n        <ha-icon icon=\"[[_config.icon]]\"></ha-icon>\n        <div>\n          [[_config.name]]\n        </div>\n      </a>\n    `;\n  }\n\n  static get styleTemplate() {\n    return html`\n      <style>\n        a {\n          display: flex;\n          align-items: center;\n          color: var(--primary-color);\n        }\n        ha-icon {\n          padding: 8px;\n          color: var(--paper-item-icon-color);\n        }\n        div {\n          flex: 1;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          margin-left: 16px;\n        }\n      </style>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.icon || !config.name || !config.url) {\n      throw new Error('Error in card configuration.');\n    }\n    this._config = config;\n  }\n}\ncustomElements.define('hui-weblink-row', HuiWeblinkRow);\n","export default function createErrorConfig(error, origConfig) {\n  return {\n    type: 'error',\n    error,\n    origConfig,\n  };\n}\n","import fireEvent from '../../../common/dom/fire_event.js';\n\nimport '../entity-rows/hui-climate-entity-row.js';\nimport '../entity-rows/hui-cover-entity-row.js';\nimport '../entity-rows/hui-group-entity-row.js';\nimport '../entity-rows/hui-input-number-entity-row.js';\nimport '../entity-rows/hui-input-select-entity-row.js';\nimport '../entity-rows/hui-input-text-entity-row.js';\nimport '../entity-rows/hui-lock-entity-row.js';\nimport '../entity-rows/hui-scene-entity-row.js';\nimport '../entity-rows/hui-script-entity-row.js';\nimport '../entity-rows/hui-text-entity-row.js';\nimport '../entity-rows/hui-timer-entity-row.js';\nimport '../entity-rows/hui-toggle-entity-row.js';\n\nimport '../special-rows/hui-call-service-row.js';\nimport '../special-rows/hui-divider-row.js';\nimport '../special-rows/hui-weblink-row.js';\n\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\nconst SPECIAL_TYPES = new Set([\n  'call-service',\n  'divider',\n  'weblink'\n]);\nconst DOMAIN_TO_ELEMENT_TYPE = {\n  automation: 'toggle',\n  climate: 'climate',\n  cover: 'cover',\n  fan: 'toggle',\n  group: 'group',\n  input_boolean: 'toggle',\n  input_number: 'input-number',\n  input_select: 'input-select',\n  input_text: 'input-text',\n  light: 'toggle',\n  lock: 'lock',\n  scene: 'scene',\n  script: 'script',\n  timer: 'timer',\n  switch: 'toggle',\n  vacuum: 'toggle'\n};\n\nfunction _createElement(tag, config) {\n  const element = document.createElement(tag);\n  try {\n    if ('setConfig' in element) element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createRowElement(config) {\n  let tag;\n\n  if (!config || typeof config !== 'object' || (!config.entity && !config.type)) {\n    return _createErrorElement('Invalid config given.', config);\n  }\n\n  const type = config.type || 'default';\n  if (SPECIAL_TYPES.has(type)) {\n    return _createElement(`hui-${type}-row`, config);\n  }\n\n  if (type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  const domain = config.entity.split('.', 1)[0];\n  tag = `hui-${DOMAIN_TO_ELEMENT_TYPE[domain] || 'text'}-entity-row`;\n\n  return _createElement(tag, config);\n}\n","import '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../components/hui-entities-toggle.js';\n\nimport createRowElement from '../common/create-row-element.js';\nimport computeDomain from '../../../common/entity/compute_domain.js';\nimport { DOMAINS_HIDE_MORE_INFO } from '../../../common/const.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HuiEntitiesCard extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      ha-card {\n        padding: 16px;\n      }\n      #states {\n        margin: -4px 0;\n      }\n      #states > div {\n        margin: 4px 0;\n      }\n      #states > div > * {\n        overflow: hidden;\n      }\n      .header {\n        @apply --paper-font-headline;\n        /* overwriting line-height +8 because entity-toggle can be 40px height,\n           compensating this with reduced padding */\n        line-height: 40px;\n        color: var(--primary-text-color);\n        padding: 4px 0 12px;\n        display: flex;\n        justify-content: space-between;\n      }\n      .header .name {\n        @apply --paper-font-common-nowrap;\n      }\n      .state-card-dialog {\n        cursor: pointer;\n      }\n    </style>\n\n    <ha-card>\n      <template is='dom-if' if='[[_showHeader(_config)]]'>\n        <div class='header'>\n          <div class=\"name\">[[_config.title]]</div>\n          <template is=\"dom-if\" if=\"[[_showHeaderToggle(_config.show_header_toggle)]]\">\n            <hui-entities-toggle hass=\"[[hass]]\" entities=\"[[_filterEntities(_config.entities)]]\"></hui-entities-toggle>\n          </template>\n        </div>\n      </template>\n      <div id=\"states\"></div>\n    </ha-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      _config: Object\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    // +1 for the header\n    return 1 + (this._config ? this._config.entities.length : 0);\n  }\n\n  _showHeaderToggle(show) {\n    // If show is undefined, we treat it as true\n    return show !== false;\n  }\n\n  _showHeader(config) {\n    // Show header if either title or toggle configured to show in it\n    return config.title || config.show_header_toggle;\n  }\n\n  setConfig(config) {\n    this._config = config;\n    this._rows = config.entities.map(item => (typeof item === 'string' ? { entity: item } : item));\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const root = this.$.states;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    this._elements = [];\n\n    for (const row of this._rows) {\n      const entityId = row.entity;\n      const element = createRowElement(row);\n      if (entityId && !DOMAINS_HIDE_MORE_INFO.includes(computeDomain(entityId))) {\n        element.classList.add('state-card-dialog');\n        element.addEventListener('click', () => this.fire('hass-more-info', { entityId }));\n      }\n      element.hass = this.hass;\n      this._elements.push(element);\n      const container = document.createElement('div');\n      container.appendChild(element);\n      root.appendChild(container);\n    }\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n\n  _filterEntities(items) {\n    return items.filter(item => (typeof item === 'string' || item.entity)).map(item =>\n      (typeof item === 'string' ? item : item.entity));\n  }\n}\n\ncustomElements.define('hui-entities-card', HuiEntitiesCard);\n","// Parse array of entity objects from config\nimport isValidEntityId from '../../../common/entity/valid_entity_id.js';\n\nexport default function processConfigEntities(entities) {\n  if (!entities || !Array.isArray(entities)) {\n    throw new Error('Entities need to be an array');\n  }\n\n  return entities.map((entityConf, index) => {\n    if (typeof entityConf === 'object' && !Array.isArray(entityConf) && entityConf.type) {\n      return entityConf;\n    }\n\n    if (typeof entityConf === 'string') {\n      entityConf = { entity: entityConf };\n    } else if (typeof entityConf === 'object' && !Array.isArray(entityConf)) {\n      if (!entityConf.entity) {\n        throw new Error(`Entity object at position ${index} is missing entity field.`);\n      }\n    } else {\n      throw new Error(`Invalid entity specified at position ${index}.`);\n    }\n\n    if (!isValidEntityId(entityConf.entity)) {\n      throw new Error(`Invalid entity ID at position ${index}: ${entityConf.entity}`);\n    }\n\n    return entityConf;\n  });\n}\n","export default function validEntityId(entityId) {\n  return /^(\\w+)\\.(\\w+)$/.test(entityId);\n}\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport createCardElement from '../common/create-card-element.js';\nimport processConfigEntities from '../common/process-config-entities.js';\n\nfunction getEntities(hass, filterState, entities) {\n  return entities.filter((entityConf) => {\n    const stateObj = hass.states[entityConf.entity];\n    return stateObj && filterState.includes(stateObj.state);\n  });\n}\n\nclass HuiEntitiesCard extends PolymerElement {\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  getCardSize() {\n    return this.lastChild ? this.lastChild.getCardSize() : 1;\n  }\n\n  setConfig(config) {\n    if (!config.state_filter || !Array.isArray(config.state_filter)) {\n      throw new Error('Incorrect filter config.');\n    }\n\n    this._config = config;\n    this._configEntities = processConfigEntities(config.entities);\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n      this._element = null;\n    }\n\n    const card = 'card' in config ? Object.assign({}, config.card) : {};\n    if (!card.type) card.type = 'entities';\n    card.entities = [];\n\n    const element = createCardElement(card);\n    element._filterRawConfig = card;\n    this._updateCardConfig(element);\n\n    this._element = element;\n  }\n\n  _hassChanged() {\n    this._updateCardConfig(this._element);\n  }\n\n  _updateCardConfig(element) {\n    if (!element || element.tagName === 'HUI-ERROR-CARD' || !this.hass) return;\n    const entitiesList = getEntities(this.hass, this._config.state_filter, this._configEntities);\n\n    if (entitiesList.length === 0 && this._config.show_empty === false) {\n      this.style.display = 'none';\n      return;\n    }\n\n    this.style.display = 'block';\n    element.setConfig(Object.assign(\n      {},\n      element._filterRawConfig,\n      { entities: entitiesList }\n    ));\n    element.isPanel = this.isPanel;\n    element.hass = this.hass;\n\n    // Attach element if it has never been attached.\n    if (!this.lastChild) this.appendChild(element);\n  }\n}\ncustomElements.define('hui-entity-filter-card', HuiEntitiesCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HuiErrorCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          background-color: red;\n          color: white;\n          padding: 8px;\n        }\n      </style>\n      [[_config.error]]\n      <pre>[[_toStr(_config.origConfig)]]</pre>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n    };\n  }\n\n  setConfig(config) {\n    this._config = config;\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  _toStr(obj) {\n    return JSON.stringify(obj, null, 2);\n  }\n}\n\ncustomElements.define('hui-error-card', HuiErrorCard);\n","import { STATES_OFF } from '../../../../common/const.js';\nimport turnOnOffEntity from './turn-on-off-entity.js';\n\nexport default function toggleEntity(hass, entityId) {\n  const turnOn = STATES_OFF.includes(hass.states[entityId].state);\n  turnOnOffEntity(hass, entityId, turnOn);\n}\n","import computeDomain from '../../../../common/entity/compute_domain.js';\n\nexport default function turnOnOffEntity(hass, entityId, turnOn = true) {\n  const stateDomain = computeDomain(entityId);\n  const serviceDomain = stateDomain === 'group' ? 'homeassistant' : stateDomain;\n\n  let service;\n  switch (stateDomain) {\n    case 'lock':\n      service = turnOn ? 'unlock' : 'lock';\n      break;\n    case 'cover':\n      service = turnOn ? 'open_cover' : 'close_cover';\n      break;\n    default:\n      service = turnOn ? 'turn_on' : 'turn_off';\n  }\n\n  hass.callService(serviceDomain, service, { entity_id: entityId });\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport processConfigEntities from '../common/process-config-entities';\n\nimport toggleEntity from '../common/entity/toggle-entity.js';\n\nimport '../../../components/entity/state-badge.js';\nimport '../../../components/ha-card.js';\nimport '../../../components/ha-icon.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HuiGlanceCard extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        .entities {\n          display: flex;\n          padding: 0 16px 4px;\n          flex-wrap: wrap;\n        }\n        .entities.no-header {\n          padding-top: 16px;\n        }\n        .entity {\n          box-sizing: border-box;\n          padding: 0 4px;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          cursor: pointer;\n          margin-bottom: 12px;\n          width: var(--glance-column-width, 20%);\n        }\n        .entity div {\n          width: 100%;\n          text-align: center;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        .name {\n          min-height: var(--paper-font-body1_-_line-height, 20px);\n        }\n      </style>\n\n      <ha-card header=\"[[_config.title]]\">\n        <div class$=\"[[_computeClasses(_config.title)]]\">\n          <template is=\"dom-repeat\" items=\"[[_configEntities]]\">\n            <template is=\"dom-if\" if=\"[[_showEntity(item, hass.states)]]\">\n              <div class=\"entity\" on-click=\"_handleClick\">\n                <template is=\"dom-if\" if=\"[[_showInfo(_config.show_name)]]\">\n                  <div class=\"name\">[[_computeName(item, hass.states)]]</div>\n                </template>\n                <state-badge\n                  state-obj=\"[[_computeStateObj(item, hass.states)]]\"\n                  override-icon=\"[[item.icon]]\"\n                ></state-badge>\n                <template is=\"dom-if\" if=\"[[_showInfo(_config.show_state)]]\">\n                  <div>[[_computeState(item, hass.states)]]</div>\n                </template>\n              </div>\n            </template>\n          </template>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _configEntities: Array,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    this._config = config;\n    this.updateStyles({ '--glance-column-width': (config && config.column_width) || '20%' });\n    this._configEntities = processConfigEntities(config.entities);\n  }\n\n  _computeClasses(hasHeader) {\n    return `entities ${hasHeader ? '' : 'no-header'}`;\n  }\n\n  _showEntity(item, states) {\n    return item.entity in states;\n  }\n\n  _showInfo(info) {\n    return info !== false;\n  }\n\n  _computeName(item, states) {\n    return 'name' in item ? item.name : computeStateName(states[item.entity]);\n  }\n\n  _computeStateObj(item, states) {\n    return states[item.entity];\n  }\n\n  _computeState(item, states) {\n    return computeStateDisplay(this.localize, states[item.entity]);\n  }\n\n  _handleClick(ev) {\n    const config = ev.model.item;\n    const entityId = config.entity;\n    switch (config.tap_action) {\n      case 'toggle':\n        toggleEntity(this.hass, entityId);\n        break;\n      case 'call-service': {\n        const [domain, service] = config.service.split('.', 2);\n        const serviceData = Object.assign(\n          {}, { entity_id: entityId },\n          config.service_data\n        );\n        this.hass.callService(domain, service, serviceData);\n        break;\n      }\n      default:\n        this.fire('hass-more-info', { entityId });\n    }\n  }\n}\n\ncustomElements.define('hui-glance-card', HuiGlanceCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../../../components/state-history-charts.js';\nimport '../../../data/ha-state-history-data.js';\n\nimport processConfigEntities from '../common/process-config-entities.js';\n\n\nclass HuiHistoryGraphCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          padding: 16px;\n        }\n        ha-card[header] {\n          padding-top: 0;\n        }\n      </style>\n\n      <ha-card header$='[[_config.title]]'>\n        <ha-state-history-data\n          hass=\"[[hass]]\"\n          filter-type=\"recent-entity\"\n          entity-id=\"[[_entities]]\"\n          data=\"{{_stateHistory}}\"\n          is-loading=\"{{_stateHistoryLoading}}\"\n          cache-config=\"[[_cacheConfig]]\"\n        ></ha-state-history-data>\n        <state-history-charts\n          hass=\"[[hass]]\"\n          history-data=\"[[_stateHistory]]\"\n          is-loading-data=\"[[_stateHistoryLoading]]\"\n          names=\"[[_names]]\"\n          up-to-now\n          no-single\n        ></state-history-charts>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _names: Object,\n      _entities: Array,\n\n      _stateHistory: Object,\n      _stateHistoryLoading: Boolean,\n      _cacheConfig: Object\n    };\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    const entities = processConfigEntities(config.entities);\n\n    this._config = config;\n\n    const _entities = [];\n    const _names = {};\n    for (const entity of entities) {\n      _entities.push(entity.entity);\n      if (entity.name) {\n        _names[entity.entity] = entity.name;\n      }\n    }\n\n    this.setProperties({\n      _cacheConfig: {\n        cacheKey: _entities.sort().join(),\n        hoursToShow: config.hours_to_show || 24,\n        refresh: config.refresh_interval || 0\n      },\n      _entities,\n      _names\n    });\n  }\n}\n\ncustomElements.define('hui-history-graph-card', HuiHistoryGraphCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeCardSize from '../common/compute-card-size.js';\nimport createCardElement from '../common/create-card-element.js';\n\nclass HuiHorizontalStackCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          display: flex;\n        }\n        #root > * {\n          flex: 1 1 0;\n          margin: 0 4px;\n        }\n        #root > *:first-child {\n          margin-left: 0;\n        }\n        #root > *:last-child {\n          margin-right: 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    let size = 1;\n    this._elements.forEach((element) => {\n      const elSize = computeCardSize(element);\n      if (elSize > size) size = elSize;\n    });\n    return size;\n  }\n\n  setConfig(config) {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error('Card config incorrect.');\n    }\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n    this._elements = [];\n    const root = this.$.root;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const elements = [];\n    config.cards.forEach((card) => {\n      const element = createCardElement(card);\n      element.hass = this.hass;\n      elements.push(element);\n      root.appendChild(element);\n    });\n    this._elements = elements;\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-horizontal-stack-card', HuiHorizontalStackCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HuiIframeCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          overflow: hidden;\n        }\n        #root {\n          width: 100%;\n          position: relative;\n        }\n        iframe {\n          border: none;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n      </style>\n      <ha-card header=\"[[_config.title]]\">\n        <div id=\"root\">\n          <iframe src=\"[[_config.url]]\"></iframe>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  setConfig(config) {\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n\n    this.$.root.style.paddingTop = config.aspect_ratio || '50%';\n  }\n\n  getCardSize() {\n    return 1 + (this.offsetHeight / 50);\n  }\n}\ncustomElements.define('hui-iframe-card', HuiIframeCard);\n","// From: https://davidwalsh.name/javascript-debounce-function\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport default function debounce(func, wait, immediate) {\n  let timeout;\n  return function (...args) {\n    const context = this;\n    const later = () => {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport Leaflet from 'leaflet';\n\nimport '../../map/ha-entity-marker.js';\n\nimport setupLeafletMap from '../../../common/dom/setup-leaflet-map.js';\nimport processConfigEntities from '../common/process-config-entities.js';\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport debounce from '../../../common/util/debounce.js';\n\nLeaflet.Icon.Default.imagePath = '/static/images/leaflet';\n\nclass HuiMapCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host([is-panel]) ha-card {\n          left: 0;\n          top: 0;\n          width: 100%;\n          /**\n           * In panel mode we want a full height map. Since parent #view\n           * only sets min-height, we need absolute positioning here\n           */\n          height: 100%;\n          position: absolute;\n        }\n\n        ha-card {\n          overflow: hidden;\n        }\n\n        #map {\n          z-index: 0;\n          border: none;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n\n        paper-icon-button {\n          position: absolute;\n          top: 75px;\n          left: 7px;\n        }\n\n        #root {\n          position: relative;\n        }\n\n        :host([is-panel]) #root {\n          height: 100%;\n        }\n      </style>\n\n      <ha-card id=\"card\" header=\"[[_config.title]]\">\n        <div id=\"root\">\n          <div id=\"map\"></div>\n          <paper-icon-button\n            on-click=\"_fitMap\"\n            icon=\"hass:image-filter-center-focus\"\n            title=\"Reset focus\"\n          ></paper-icon-button>\n        </div>\n      </ha-card>\n\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_drawEntities'\n      },\n      _config: Object,\n      isPanel: {\n        type: Boolean,\n        reflectToAttribute: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this._debouncedResizeListener = debounce(this._resetMap.bind(this), 100);\n  }\n\n  ready() {\n    super.ready();\n\n    if (!this._config || this.isPanel) {\n      return;\n    }\n\n    this.$.root.style.paddingTop = this._config.aspect_ratio || '100%';\n  }\n\n  setConfig(config) {\n    if (!config) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._configEntities = processConfigEntities(config.entities);\n    this._config = config;\n  }\n\n  getCardSize() {\n    let ar = this._config.aspect_ratio || '100%';\n    ar = ar.substr(0, ar.length - 1);\n    return 1 + Math.floor(ar / 25) || 3;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // Observe changes to map size and invalidate to prevent broken rendering\n    // Uses ResizeObserver in Chrome, otherwise window resize event\n    if (typeof ResizeObserver === 'function') {\n      this._resizeObserver = new ResizeObserver(() => this._debouncedResizeListener());\n      this._resizeObserver.observe(this.$.map);\n    } else {\n      window.addEventListener('resize', this._debouncedResizeListener);\n    }\n\n    this._map = setupLeafletMap(this.$.map);\n    this._drawEntities(this.hass);\n\n    setTimeout(() => {\n      this._resetMap();\n      this._fitMap();\n    }, 1);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this._map) {\n      this._map.remove();\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.unobserve(this.$.map);\n    } else {\n      window.removeEventListener('resize', this._debouncedResizeListener);\n    }\n  }\n\n  _resetMap() {\n    if (!this._map) {\n      return;\n    }\n    this._map.invalidateSize();\n  }\n\n  _fitMap() {\n    const zoom = this._config.default_zoom;\n    if (this._mapItems.length === 0) {\n      this._map.setView(\n        new Leaflet.LatLng(this.hass.config.latitude, this.hass.config.longitude),\n        zoom || 14\n      );\n      return;\n    }\n\n    const bounds = new Leaflet.latLngBounds(this._mapItems.map(item => item.getLatLng()));\n    this._map.fitBounds(bounds.pad(0.5));\n\n    if (zoom && this._map.getZoom() > zoom) {\n      this._map.setZoom(zoom);\n    }\n  }\n\n  _drawEntities(hass) {\n    const map = this._map;\n    if (!map) {\n      return;\n    }\n\n    if (this._mapItems) {\n      this._mapItems.forEach(marker => marker.remove());\n    }\n    const mapItems = this._mapItems = [];\n\n    this._configEntities.forEach((entity) => {\n      const entityId = entity.entity;\n      if (!(entityId in hass.states)) {\n        return;\n      }\n      const stateObj = hass.states[entityId];\n      const title = computeStateName(stateObj);\n      const { latitude, longitude, passive, icon, radius,\n        entity_picture: entityPicture, gps_accuracy: gpsAccuracy } = stateObj.attributes;\n\n      if (!(latitude && longitude)) {\n        return;\n      }\n\n      let markerIcon;\n      let iconHTML;\n      let el;\n\n      if (computeStateDomain(stateObj) === 'zone') {\n        // DRAW ZONE\n        if (passive) return;\n\n        // create icon\n        if (icon) {\n          el = document.createElement('ha-icon');\n          el.setAttribute('icon', icon);\n          iconHTML = el.outerHTML;\n        } else {\n          iconHTML = title;\n        }\n\n        markerIcon = Leaflet.divIcon({\n          html: iconHTML,\n          iconSize: [24, 24],\n          className: '',\n        });\n\n        // create market with the icon\n        mapItems.push(Leaflet.marker([latitude, longitude], {\n          icon: markerIcon,\n          interactive: false,\n          title: title,\n        }).addTo(map));\n\n        // create circle around it\n        mapItems.push(Leaflet.circle([latitude, longitude], {\n          interactive: false,\n          color: '#FF9800',\n          radius: radius,\n        }).addTo(map));\n\n        return;\n      }\n\n      // DRAW ENTITY\n      // create icon\n      const entityName = title.split(' ').map(part => part[0]).join('').substr(0, 3);\n\n      el = document.createElement('ha-entity-marker');\n      el.setAttribute('entity-id', entityId);\n      el.setAttribute('entity-name', entityName);\n      el.setAttribute('entity-picture', entityPicture || '');\n\n      /* Leaflet clones this element before adding it to the map. This messes up\n         our Polymer object and we can't pass data through. Thus we hack like this. */\n      markerIcon = Leaflet.divIcon({\n        html: el.outerHTML,\n        iconSize: [48, 48],\n        className: '',\n      });\n\n      // create market with the icon\n      mapItems.push(Leaflet.marker([latitude, longitude], {\n        icon: markerIcon,\n        title: computeStateName(stateObj),\n      }).addTo(map));\n\n      // create circle around if entity has accuracy\n      if (gpsAccuracy) {\n        mapItems.push(Leaflet.circle([latitude, longitude], {\n          interactive: false,\n          color: '#0288D1',\n          radius: gpsAccuracy,\n        }).addTo(map));\n      }\n    });\n  }\n}\n\ncustomElements.define('hui-map-card', HuiMapCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../../../components/ha-markdown.js';\n\nclass HuiMarkdownCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          @apply --paper-font-body1;\n        }\n        ha-markdown {\n          display: block;\n          padding: 0 16px 16px;\n          -ms-user-select: initial;\n          -webkit-user-select: initial;\n          -moz-user-select: initial;\n        }\n        :host([no-title]) ha-markdown {\n          padding-top: 16px;\n        }\n        ha-markdown > *:first-child {\n          margin-top: 0;\n        }\n        ha-markdown > *:last-child {\n          margin-bottom: 0;\n        }\n        ha-markdown a {\n          color: var(--primary-color);\n        }\n        ha-markdown img {\n          max-width: 100%;\n        }\n      </style>\n      <ha-card header=\"[[_config.title]]\">\n        <ha-markdown content='[[_config.content]]'></ha-markdown>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n      noTitle: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: '_computeNoTitle(_config.title)',\n      },\n    };\n  }\n\n  setConfig(config) {\n    this._config = config;\n  }\n\n  getCardSize() {\n    return this._config.content.split('\\n').length;\n  }\n\n  _computeNoTitle(title) {\n    return !title;\n  }\n}\n\ncustomElements.define('hui-markdown-card', HuiMarkdownCard);\n","import createErrorCardConfig from '../common/create-error-card-config.js';\nimport computeDomain from '../../../common/entity/compute_domain.js';\n\n\nexport default class LegacyWrapperCard extends HTMLElement {\n  constructor(tag, domain) {\n    super();\n    this._tag = tag.toUpperCase();\n    this._domain = domain;\n    this._element = null;\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error('No entity specified');\n    }\n\n    if (computeDomain(config.entity) !== this._domain) {\n      throw new Error(`Specified entity needs to be of domain ${this._domain}.`);\n    }\n\n    this._config = config;\n  }\n\n  set hass(hass) {\n    const entityId = this._config.entity;\n\n    if (entityId in hass.states) {\n      this._ensureElement(this._tag);\n      this.lastChild.hass = hass;\n      this.lastChild.stateObj = hass.states[entityId];\n    } else {\n      this._ensureElement('HUI-ERROR-CARD');\n      this.lastChild.setConfig(createErrorCardConfig(`No state available for ${entityId}`, this._config));\n    }\n  }\n\n  _ensureElement(tag) {\n    if (this.lastChild && this.lastChild.tagName === tag) return;\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    this.appendChild(document.createElement(tag));\n  }\n}\n","import '../../../cards/ha-media_player-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiMediaControlCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-media_player-card', 'media_player');\n  }\n}\n\ncustomElements.define('hui-media-control-card', HuiMediaControlCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HuiPictureCard extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          overflow: hidden;\n        }\n        ha-card[clickable] {\n          cursor: pointer;\n        }\n        img {\n          display: block;\n          width: 100%;\n        }\n      </style>\n\n      <ha-card on-click=\"_cardClicked\" clickable$='[[_computeClickable(_config)]]'>\n        <img src='[[_config.image]]' />\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.image) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._config = config;\n  }\n\n  _computeClickable(config) {\n    return config.navigation_path || config.service;\n  }\n\n  _cardClicked() {\n    if (this._config.navigation_path) {\n      this.navigate(this._config.navigation_path);\n    }\n    if (this._config.service) {\n      const [domain, service] = this._config.service.split('.', 2);\n      this.hass.callService(domain, service, this._config.service_data);\n    }\n  }\n}\n\ncustomElements.define('hui-picture-card', HuiPictureCard);\n","import { dedupingMixin } from '@polymer/polymer/lib/utils/mixin.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin';\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport computeStateName from '../../../common/entity/compute_state_name';\n\n/*\n * @polymerMixin\n * @appliesMixin EventsMixin\n * @appliesMixin NavigateMixin\n */\nexport default dedupingMixin(superClass =>\n  class extends NavigateMixin(EventsMixin(superClass)) {\n    handleClick(hass, config) {\n      const tapAction = config.tap_action || 'more-info';\n      if (tapAction === 'none') return;\n\n      switch (tapAction) {\n        case 'more-info':\n          this.fire('hass-more-info', { entityId: config.entity });\n          break;\n        case 'navigate':\n          this.navigate(config.navigation_path);\n          break;\n        case 'toggle':\n          toggleEntity(hass, config.entity);\n          break;\n        case 'call-service': {\n          const [domain, service] = config.service.split('.', 2);\n          const serviceData = Object.assign(\n            {}, { entity_id: config.entity },\n            config.service_data\n          );\n          hass.callService(domain, service, serviceData);\n        }\n      }\n    }\n\n    computeTooltip(hass, config) {\n      if (config.title) return config.title;\n\n      const stateName = (config.entity in hass.states) ?\n        computeStateName(hass.states[config.entity]) : config.entity;\n\n      let tooltip;\n      switch (config.tap_action) {\n        case 'navigate':\n          tooltip = `Navigate to ${config.navigation_path}`;\n          break;\n        case 'toggle':\n          tooltip = `Toggle ${stateName}`;\n          break;\n        case 'call-service':\n          tooltip = `Call service ${config.service}`;\n          break;\n        default:\n          tooltip = `Show more-info: ${stateName}`;\n      }\n\n      return tooltip;\n    }\n  });\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-icon.js';\n\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n */\nclass HuiIconElement extends ElementClickMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer; \n        } \n      </style>\n      <ha-icon \n        icon=\"[[_config.icon]]\"\n        title$=\"[[computeTooltip(hass, _config)]]\"\n      ></ha-icon> \n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config || !config.icon) {\n      throw Error('Error in element configuration');\n    }\n\n    this._config = config;\n  }\n}\ncustomElements.define('hui-icon-element', HuiIconElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-toggle-button/paper-toggle-button.js';\n\nimport { STATES_OFF } from '../../../common/const.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nconst UPDATE_INTERVAL = 10000;\nconst DEFAULT_FILTER = 'grayscale(100%)';\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiImage extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        img {\n          display: block;\n          height: auto;\n          transition: filter .2s linear;\n          width: 100%;\n        }\n\n        .error {\n          text-align: center;\n        }\n\n        .hidden {\n          display: none;\n        }\n\n        #brokenImage {\n          background: grey url('/static/images/image-broken.svg') center/36px no-repeat;\n        }\n\n      </style>\n\n      <img\n        id=\"image\"\n        src=\"[[_imageSrc]]\"\n        on-error=\"_onImageError\"\n        on-load=\"_onImageLoad\" />\n      <div id=\"brokenImage\"></div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      entity: String,\n      image: String,\n      stateImage: Object,\n      cameraImage: String,\n      filter: String,\n      stateFilter: Object,\n      _imageSrc: String\n    };\n  }\n\n  static get observers() {\n    return ['_configChanged(image, stateImage, cameraImage)'];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.cameraImage) {\n      this.timer = setInterval(() => this._updateCameraImageSrc(), UPDATE_INTERVAL);\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    clearInterval(this.timer);\n  }\n\n  _configChanged(image, stateImage, cameraImage) {\n    if (cameraImage) {\n      this._updateCameraImageSrc();\n    } else if (image && !stateImage) {\n      this._imageSrc = image;\n    }\n  }\n\n  _onImageError() {\n    this._imageSrc = null;\n    this.$.image.classList.add('hidden');\n    this.$.brokenImage.style.setProperty('height', `${this._lastImageHeight || '100'}px`);\n    this.$.brokenImage.classList.remove('hidden');\n  }\n\n  _onImageLoad() {\n    this.$.image.classList.remove('hidden');\n    this.$.brokenImage.classList.add('hidden');\n    this._lastImageHeight = this.$.image.offsetHeight;\n  }\n\n  _hassChanged(hass) {\n    if (this.cameraImage || !this.entity) {\n      return;\n    }\n\n    const stateObj = hass.states[this.entity];\n    const newState = !stateObj ? 'unavailable' : stateObj.state;\n\n    if (newState === this._currentState) return;\n    this._currentState = newState;\n\n    this._updateStateImage();\n    this._updateStateFilter(stateObj);\n  }\n\n  _updateStateImage() {\n    if (!this.stateImage) {\n      this._imageFallback = true;\n      return;\n    }\n    const stateImg = this.stateImage[this._currentState];\n    this._imageSrc = stateImg || this.image;\n    this._imageFallback = !stateImg;\n  }\n\n  _updateStateFilter(stateObj) {\n    let filter;\n    if (!this.stateFilter) {\n      filter = this.filter;\n    } else {\n      filter = this.stateFilter[this._currentState] || this.filter;\n    }\n\n    const isOff = !stateObj || STATES_OFF.includes(stateObj.state);\n    this.$.image.style.filter = filter || (isOff && this._imageFallback && DEFAULT_FILTER) || '';\n  }\n\n  async _updateCameraImageSrc() {\n    try {\n      const { content_type: contentType, content } = await this.hass.callWS({\n        type: 'camera_thumbnail',\n        entity_id: this.cameraImage,\n      });\n      this._imageSrc = `data:${contentType};base64, ${content}`;\n      this._onImageLoad();\n    } catch (err) {\n      this._onImageError();\n    }\n  }\n}\n\ncustomElements.define('hui-image', HuiImage);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../components/hui-image.js';\n\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n */\nclass HuiImageElement extends ElementClickMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host(.clickable) {\n          cursor: pointer; \n        } \n        hui-image {\n          overflow-y: hidden;\n        } \n      </style>\n      <hui-image\n        hass=\"[[hass]]\"\n        entity=\"[[_config.entity]]\"\n        image=\"[[_config.image]]\"\n        state-image=\"[[_config.state_image]]\"\n        camera-image=\"[[_config.camera_image]]\"\n        filter=\"[[_config.filter]]\"\n        state-filter=\"[[_config.state_filter]]\"\n        title$=\"[[computeTooltip(hass, _config)]]\"\n      ></hui-image>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config) {\n      throw Error('Error in element configuration');\n    }\n\n    this.classList.toggle('clickable', config.tap_action !== 'none');\n    this._config = config;\n  }\n}\ncustomElements.define('hui-image-element', HuiImageElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\n\nclass HuiServiceButtonElement extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-call-service-button {\n          color: var(--primary-color);\n          white-space: nowrap;\n        }\n      </style>\n      <ha-call-service-button\n        hass=\"[[hass]]\"\n        domain=\"[[_domain]]\"\n        service=\"[[_service]]\"\n        service-data=\"[[_config.service_data]]\"\n      >[[_config.title]]</ha-call-service-button>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _domain: String,\n      _service: String\n    };\n  }\n\n  setConfig(config) {\n    if (!config || !config.service) {\n      throw Error('Error in element configuration');\n    }\n\n    const [domain, service] = config.service.split('.', 2);\n    this.setProperties({\n      _config: config,\n      _domain: domain,\n      _service: service\n    });\n  }\n}\ncustomElements.define('hui-service-button-element', HuiServiceButtonElement);\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '../../../components/entity/ha-state-label-badge.js';\nimport computeStateName from '../../../common/entity/compute_state_name';\n\nclass HuiStateBadgeElement extends PolymerElement {\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n    };\n  }\n\n  static get observers() {\n    return [\n      '_updateBadge(hass, _config)'\n    ];\n  }\n\n  _updateBadge(hass, config) {\n    if (!hass || !config || !(config.entity in hass.states)) return;\n\n    if (!this._badge) {\n      this._badge = document.createElement('ha-state-label-badge');\n    }\n\n    const stateObj = hass.states[config.entity];\n    this._badge.state = stateObj;\n    this._badge.setAttribute('title', computeStateName(stateObj));\n\n    if (!this.lastChild) {\n      this.appendChild(this._badge);\n    }\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw Error('Error in element configuration');\n    }\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    this._badge = null;\n    this._config = config;\n  }\n}\ncustomElements.define('hui-state-badge-element', HuiStateBadgeElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/entity/state-badge.js';\n\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n */\nclass HuiStateIconElement extends ElementClickMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer; \n        } \n      </style>\n      <state-badge \n        state-obj=\"[[_stateObj]]\"\n        title$=\"[[computeTooltip(hass, _config)]]\"\n      ></state-badge> \n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object,\n      _stateObj: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw Error('Error in element configuration');\n    }\n\n    this._config = config;\n  }\n\n  _hassChanged(hass) {\n    this._stateObj = hass.states[this._config.entity];\n  }\n}\ncustomElements.define('hui-state-icon-element', HuiStateIconElement);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\n\nimport '../../../components/entity/ha-state-label-badge.js';\n\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport ElementClickMixin from '../mixins/element-click-mixin.js';\n\n/*\n * @appliesMixin ElementClickMixin\n * @appliesMixin LocalizeMixin\n */\nclass HuiStateLabelElement extends LocalizeMixin(ElementClickMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          cursor: pointer;\n        }\n        .state-label {\n          padding: 8px;\n          white-space: nowrap;\n        }\n      </style>\n      <div class=\"state-label\" title$=\"[[computeTooltip(hass, _config)]]\">\n        [[_config.prefix]][[_computeStateDisplay(_stateObj)]][[_config.suffix]]\n      </div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object,\n      _stateObj: Object\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', () => this.handleClick(this.hass, this._config));\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw Error('Error in element configuration');\n    }\n\n    this._config = config;\n  }\n\n  _hassChanged(hass) {\n    this._stateObj = hass.states[this._config.entity];\n  }\n\n  _computeStateDisplay(stateObj) {\n    return stateObj ? computeStateDisplay(this.localize, stateObj) : '-';\n  }\n}\ncustomElements.define('hui-state-label-element', HuiStateLabelElement);\n","import '../elements/hui-icon-element.js';\nimport '../elements/hui-image-element.js';\nimport '../elements/hui-service-button-element.js';\nimport '../elements/hui-state-badge-element.js';\nimport '../elements/hui-state-icon-element.js';\nimport '../elements/hui-state-label-element.js';\n\nimport fireEvent from '../../../common/dom/fire_event.js';\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\nconst ELEMENT_TYPES = new Set([\n  'icon',\n  'image',\n  'service-button',\n  'state-badge',\n  'state-icon',\n  'state-label',\n]);\n\nfunction _createElement(tag, config) {\n  const element = document.createElement(tag);\n  try {\n    element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createHuiElement(config) {\n  if (!config || typeof config !== 'object' || !config.type) {\n    return _createErrorElement('No element type configured.', config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    const tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  if (!ELEMENT_TYPES.has(config.type)) {\n    return _createErrorElement(`Unknown element type encountered: ${config.type}.`, config);\n  }\n\n  return _createElement(`hui-${config.type}-element`, config);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport createHuiElement from '../common/create-hui-element.js';\n\nclass HuiPictureElementsCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      ha-card {\n        overflow: hidden;\n      }\n      #root {\n        position: relative;\n        overflow: hidden;\n      }\n      #root img {\n        display: block;\n        width: 100%;\n      }\n      .element {\n        position: absolute;\n        transform: translate(-50%, -50%);\n      }\n      hui-image-element {\n        overflow-y: hidden;\n      }\n    </style>\n\n    <ha-card header=\"[[_config.title]]\">\n      <div id=\"root\"></div>\n    </ha-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    if (!config || !config.image || !Array.isArray(config.elements)) {\n      throw new Error('Invalid card configuration');\n    }\n\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n    const root = this.$.root;\n    this._elements = [];\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const img = document.createElement('img');\n    img.src = config.image;\n    root.appendChild(img);\n\n    config.elements.forEach((element) => {\n      const el = createHuiElement(element);\n      el.hass = this.hass;\n      this._elements.push(el);\n\n      el.classList.add('element');\n      Object.keys(element.style).forEach((prop) => {\n        el.style.setProperty(prop, element.style[prop]);\n      });\n      root.appendChild(el);\n    });\n\n    if (this.hass) {\n      this._hassChanged(this.hass);\n    }\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-picture-elements-card', HuiPictureElementsCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../components/hui-image.js';\n\nimport computeDomain from '../../../common/entity/compute_domain.js';\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nconst UNAVAILABLE = 'Unavailable';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HuiPictureEntityCard extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          min-height: 75px;\n          overflow: hidden;\n          position: relative;\n        }\n        ha-card.canInteract {\n          cursor: pointer;\n        }\n        .footer {\n          @apply --paper-font-common-nowrap;\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.3);\n          padding: 16px;\n          font-size: 16px;\n          line-height: 16px;\n          color: white;\n        }\n        .both {\n          display: flex;\n          justify-content: space-between;\n        }\n        .state {\n          text-align: right;\n        }\n      </style>\n\n      <ha-card id='card' on-click=\"_cardClicked\">\n        <hui-image\n          hass=\"[[hass]]\"\n          image=\"[[_config.image]]\"\n          state-image=\"[[_config.state_image]]\"\n          camera-image=\"[[_getCameraImage(_config)]]\"\n          entity=\"[[_config.entity]]\"\n        ></hui-image>\n        <template is=\"dom-if\" if=\"[[_showNameAndState(_config)]]\">\n          <div class=\"footer both\">\n            <div>[[_name]]</div>\n            <div>[[_state]]</div>\n        </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[_showName(_config)]]\">\n          <div class=\"footer\">\n            [[_name]]\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[_showState(_config)]]\">\n          <div class=\"footer state\">\n            [[_state]]\n          </div>\n        </template>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object,\n      _name: String,\n      _state: String\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._entityDomain = computeDomain(config.entity);\n    if (this._entityDomain !== 'camera' &&\n        (!config.image && !config.state_image && !config.camera_image)) {\n      throw new Error('No image source configured.');\n    }\n\n    this._config = config;\n  }\n\n  _hassChanged(hass) {\n    const config = this._config;\n    const entityId = config.entity;\n    const stateObj = hass.states[entityId];\n\n    // Nothing changed\n    if ((!stateObj && this._oldState === UNAVAILABLE) ||\n        (stateObj && stateObj.state === this._oldState)) {\n      return;\n    }\n\n    let name;\n    let state;\n    let stateLabel;\n    let available;\n\n    if (stateObj) {\n      name = config.name || computeStateName(stateObj);\n      state = stateObj.state;\n      stateLabel = computeStateDisplay(this.localize, stateObj);\n      available = true;\n    } else {\n      name = config.name || entityId;\n      state = UNAVAILABLE;\n      stateLabel = this.localize('state.default.unavailable');\n      available = false;\n    }\n\n    this.setProperties({\n      _name: name,\n      _state: stateLabel,\n      _oldState: state\n    });\n\n    this.$.card.classList.toggle('canInteract', available);\n  }\n\n  _showNameAndState(config) {\n    return config.show_name !== false && config.show_state !== false;\n  }\n\n  _showName(config) {\n    return config.show_name !== false && config.show_state === false;\n  }\n\n  _showState(config) {\n    return config.show_name === false && config.show_state !== false;\n  }\n\n  _cardClicked() {\n    const config = this._config;\n    const entityId = config.entity;\n\n    if (!(entityId in this.hass.states)) return;\n\n    if (config.tap_action === 'toggle') {\n      toggleEntity(this.hass, entityId);\n    } else {\n      this.fire('hass-more-info', { entityId });\n    }\n  }\n\n  _getCameraImage(config) {\n    return this._entityDomain === 'camera' ? config.entity : config.camera_image;\n  }\n}\n\ncustomElements.define('hui-picture-entity-card', HuiPictureEntityCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../../../components/ha-icon.js';\nimport '../components/hui-image.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport { DOMAINS_TOGGLE } from '../../../common/const.js';\nimport stateIcon from '../../../common/entity/state_icon.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\nimport processConfigEntities from '../common/process-config-entities';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\nimport computeDomain from '../../../common/entity/compute_domain';\n\nconst STATES_OFF = new Set([\n  'closed',\n  'locked',\n  'not_home',\n  'off'\n]);\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HuiPictureGlanceCard extends NavigateMixin(LocalizeMixin(EventsMixin(PolymerElement))) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          position: relative;\n          min-height: 48px;\n          overflow: hidden;\n        }\n        hui-image.clickable {\n          cursor: pointer;\n        }\n        .box {\n          @apply --paper-font-common-nowrap;\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.3);\n          padding: 4px 8px;\n          font-size: 16px;\n          line-height: 40px;\n          color: white;\n          display: flex;\n          justify-content: space-between;\n        }\n        .box .title {\n          font-weight: 500;\n          margin-left: 8px;\n        }\n        ha-icon {\n          cursor: pointer;\n          padding: 8px;\n          color: #A9A9A9;\n        }\n        ha-icon.state-on {\n          color: white;\n        }\n      </style>\n\n      <ha-card>\n        <hui-image\n          class$='[[_computeImageClass(_config)]]'\n          on-click='_handleImageClick'\n          hass=\"[[hass]]\"\n          image=\"[[_config.image]]\"\n          state-image=\"[[_config.state_image]]\"\n          camera-image=\"[[_config.camera_image]]\"\n          entity=\"[[_config.entity]]\"\n        ></hui-image>\n        <div class=\"box\">\n          <template is=\"dom-if\" if=\"[[_config.title]]\">\n            <div class=\"title\">[[_config.title]]</div>\n          </template>\n          <div>\n            <template is=\"dom-repeat\" items=\"[[_computeVisible(_entitiesDialog, hass.states)]]\">\n              <ha-icon\n                on-click=\"_openDialog\"\n                class$=\"[[_computeButtonClass(item.entity, hass.states)]]\"\n                icon=\"[[_computeIcon(item, hass.states)]]\"\n                title=\"[[_computeTooltip(item.entity, hass.states)]]\"\n              ></ha-icon>\n            </template>\n          </div>\n          <div>\n            <template is=\"dom-repeat\" items=\"[[_computeVisible(_entitiesToggle, hass.states)]]\">\n              <ha-icon\n                on-click=\"_callService\"\n                class$=\"[[_computeButtonClass(item.entity, hass.states)]]\"\n                icon=\"[[_computeIcon(item, hass.states)]]\"\n                title=\"[[_computeTooltip(item.entity, hass.states)]]\"\n              ></ha-icon>\n            </template>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _entitiesDialog: Array,\n      _entitiesToggle: Array,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entities || !Array.isArray(config.entities) ||\n      !(config.image || config.camera_image || config.state_image) ||\n      (config.state_image && !config.entity)) {\n      throw new Error('Invalid card configuration');\n    }\n    const entities = processConfigEntities(config.entities);\n    const dialog = [];\n    const toggle = [];\n\n    entities.forEach((item) => {\n      if (config.force_dialog || !DOMAINS_TOGGLE.has(computeDomain(item.entity))) {\n        dialog.push(item);\n      } else {\n        toggle.push(item);\n      }\n    });\n    this.setProperties({\n      _config: config,\n      _entitiesDialog: dialog,\n      _entitiesToggle: toggle\n    });\n  }\n\n  _computeVisible(collection, states) {\n    return collection.filter(el => el.entity in states);\n  }\n\n  _computeIcon(item, states) {\n    return item.icon || stateIcon(states[item.entity]);\n  }\n\n  _computeButtonClass(entityId, states) {\n    return STATES_OFF.has(states[entityId].state) ? '' : 'state-on';\n  }\n\n  _computeTooltip(entityId, states) {\n    return `${computeStateName(states[entityId])}: ${computeStateDisplay(this.localize, states[entityId])}`;\n  }\n\n  _computeImageClass(config) {\n    return config.navigation_path || config.camera_image ? 'clickable' : '';\n  }\n\n  _openDialog(ev) {\n    this.fire('hass-more-info', { entityId: ev.model.item.entity });\n  }\n\n  _callService(ev) {\n    toggleEntity(this.hass, ev.model.item.entity);\n  }\n\n  _handleImageClick() {\n    if (this._config.navigation_path) {\n      this.navigate(this._config.navigation_path);\n      return;\n    }\n\n    if (this._config.camera_image) {\n      this.fire('hass-more-info', { entityId: this._config.camera_image });\n    }\n  }\n}\ncustomElements.define('hui-picture-glance-card', HuiPictureGlanceCard);\n","import '../../../cards/ha-plant-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiPlantStatusCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-plant-card', 'plant');\n  }\n}\n\ncustomElements.define('hui-plant-status-card', HuiPlantStatusCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeCardSize from '../common/compute-card-size.js';\nimport createCardElement from '../common/create-card-element.js';\n\nclass HuiVerticalStackCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          display: flex;\n          flex-direction: column;\n        }\n        #root > * {\n          margin: 4px 0 8px 0;\n        }\n        #root > *:first-child {\n          margin-top: 0;\n        }\n        #root > *:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    let totalSize = 0;\n    this._elements.forEach((element) => {\n      totalSize += computeCardSize(element);\n    });\n    return totalSize;\n  }\n\n  setConfig(config) {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error('Card config incorrect');\n    }\n\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n\n    this._elements = [];\n    const root = this.$.root;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const elements = [];\n    config.cards.forEach((card) => {\n      const element = createCardElement(card);\n      element.hass = this.hass;\n      elements.push(element);\n      root.appendChild(element);\n    });\n    this._elements = elements;\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-vertical-stack-card', HuiVerticalStackCard);\n","import '../../../cards/ha-camera-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiWeatherForecastCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-weather-card', 'weather');\n  }\n\n  getCardSize() {\n    return 4;\n  }\n}\n\ncustomElements.define('hui-weather-forecast-card', HuiWeatherForecastCard);\n","import fireEvent from '../../../common/dom/fire_event.js';\n\nimport '../cards/hui-conditional-card.js';\nimport '../cards/hui-entities-card.js';\nimport '../cards/hui-entity-filter-card.js';\nimport '../cards/hui-error-card.js';\nimport '../cards/hui-glance-card';\nimport '../cards/hui-history-graph-card.js';\nimport '../cards/hui-horizontal-stack-card.js';\nimport '../cards/hui-iframe-card.js';\nimport '../cards/hui-map-card.js';\nimport '../cards/hui-markdown-card.js';\nimport '../cards/hui-media-control-card.js';\nimport '../cards/hui-picture-card.js';\nimport '../cards/hui-picture-elements-card';\nimport '../cards/hui-picture-entity-card';\nimport '../cards/hui-picture-glance-card';\nimport '../cards/hui-plant-status-card.js';\nimport '../cards/hui-vertical-stack-card.js';\nimport '../cards/hui-weather-forecast-card';\n\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CARD_TYPES = new Set([\n  'conditional',\n  'entities',\n  'entity-filter',\n  'error',\n  'glance',\n  'history-graph',\n  'horizontal-stack',\n  'iframe',\n  'map',\n  'markdown',\n  'media-control',\n  'picture',\n  'picture-elements',\n  'picture-entity',\n  'picture-glance',\n  'plant-status',\n  'vertical-stack',\n  'weather-forecast'\n]);\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\n\nfunction _createElement(tag, config) {\n  const element = document.createElement(tag);\n  try {\n    element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createCardElement(config) {\n  let tag;\n\n  if (!config || typeof config !== 'object' || !config.type) {\n    return _createErrorElement('No card type configured.', config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  if (!CARD_TYPES.has(config.type)) {\n    return _createErrorElement(`Unknown card type encountered: ${config.type}.`, config);\n  }\n\n  return _createElement(`hui-${config.type}-card`, config);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeUnusedEntities from './common/compute-unused-entities.js';\nimport createCardElement from './common/create-card-element.js';\n\nimport './cards/hui-entities-card.js';\n\nclass HuiUnusedEntities extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          max-width: 600px;\n          margin: 0 auto;\n          padding: 8px 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      config: {\n        type: Object,\n        observer: '_configChanged'\n      },\n    };\n  }\n\n  _configChanged(config) {\n    const root = this.$.root;\n    if (root.lastChild) root.removeChild(root.lastChild);\n\n    const entities = computeUnusedEntities(this.hass, config).map(entity =>\n      ({ entity, secondary_info: 'entity-id' }));\n    const cardConfig = {\n      type: 'entities',\n      title: 'Unused entities',\n      entities,\n      show_header_toggle: false\n    };\n    const element = createCardElement(cardConfig);\n    element.hass = this.hass;\n    root.appendChild(element);\n  }\n\n  _hassChanged(hass) {\n    const root = this.$.root;\n    if (!root.lastChild) return;\n    root.lastChild.hass = hass;\n  }\n}\ncustomElements.define('hui-unused-entities', HuiUnusedEntities);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../components/entity/ha-state-label-badge.js';\n\nimport applyThemesOnElement from '../../common/dom/apply_themes_on_element.js';\n\nimport createCardElement from './common/create-card-element';\n\nclass HUIView extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n      :host {\n        display: block;\n        padding: 4px 4px 0;\n        transform: translateZ(0);\n        position: relative;\n      }\n\n      #badges {\n        margin: 8px 16px;\n        font-size: 85%;\n        text-align: center;\n      }\n\n      #columns {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n      }\n\n      .column {\n        flex-basis: 0;\n        flex-grow: 1;\n        max-width: 500px;\n        overflow-x: hidden;\n      }\n\n      .column > * {\n        display: block;\n        margin: 4px 4px 8px;\n      }\n\n      @media (max-width: 500px) {\n        :host {\n          padding-left: 0;\n          padding-right: 0;\n        }\n\n        .column > * {\n          margin-left: 0;\n          margin-right: 0;\n        }\n      }\n\n      @media (max-width: 599px) {\n        .column {\n          max-width: 600px;\n        }\n      }\n      </style>\n      <div id=\"badges\"></div>\n      <div id=\"columns\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      config: Object,\n      columns: Number\n    };\n  }\n\n  static get observers() {\n    return [\n      // Put all properties in 1 observer so we only call configChanged once\n      '_createBadges(config)',\n      '_createCards(config, columns)'\n    ];\n  }\n\n  constructor() {\n    super();\n    this._cards = [];\n    this._badges = [];\n  }\n\n  _createBadges(config) {\n    const root = this.$.badges;\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.badges || !Array.isArray(config.badges)) {\n      root.style.display = 'none';\n      this._badges = [];\n      return;\n    }\n\n    const elements = [];\n    for (const entityId of config.badges) {\n      if (!(entityId in this.hass.states)) continue;\n\n      const element = document.createElement('ha-state-label-badge');\n      element.state = this.hass.states[entityId];\n      elements.push({ element, entityId });\n      root.appendChild(element);\n    }\n    this._badges = elements;\n    root.style.display = elements.length > 0 ? 'block' : 'none';\n  }\n\n  _createCards(config) {\n    const root = this.$.columns;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      this._cards = [];\n      return;\n    }\n\n    const elements = config.cards.map((cardConfig) => {\n      const element = createCardElement(cardConfig);\n      element.hass = this.hass;\n      return element;\n    });\n\n    let columns = [];\n    const columnEntityCount = [];\n    for (let i = 0; i < this.columns; i++) {\n      columns.push([]);\n      columnEntityCount.push(0);\n    }\n\n    // Find column with < 5 entities, else column with lowest count\n    function getColumnIndex(size) {\n      let minIndex = 0;\n      for (let i = 0; i < columnEntityCount.length; i++) {\n        if (columnEntityCount[i] < 5) {\n          minIndex = i;\n          break;\n        }\n        if (columnEntityCount[i] < columnEntityCount[minIndex]) {\n          minIndex = i;\n        }\n      }\n\n      columnEntityCount[minIndex] += size;\n\n      return minIndex;\n    }\n\n    elements.forEach((el) => {\n      // Trigger custom elements to build up DOM. This is needed for some elements\n      // that use the DOM to decide their height. We don't have to clean this up\n      // because a DOM element can only be in 1 position, so it will be removed from\n      // 'this' and added to the correct column afterwards.\n      this.appendChild(el);\n      const cardSize = typeof el.getCardSize === 'function' ? el.getCardSize() : 1;\n      columns[getColumnIndex(cardSize)].push(el);\n    });\n\n    // Remove empty columns\n    columns = columns.filter(val => val.length > 0);\n\n    columns.forEach((column) => {\n      const columnEl = document.createElement('div');\n      columnEl.classList.add('column');\n      column.forEach(el => columnEl.appendChild(el));\n      root.appendChild(columnEl);\n    });\n\n    this._cards = elements;\n\n    if ('theme' in config) {\n      applyThemesOnElement(root, this.hass.themes, config.theme);\n    }\n  }\n\n  _hassChanged(hass) {\n    this._badges.forEach((badge) => {\n      const { element, entityId } = badge;\n      element.setProperties({\n        hass,\n        state: hass.states[entityId]\n      });\n    });\n    this._cards.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-view', HUIView);\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-scroll-effects/effects/waterfall.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/app-route/app-route.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-tabs/paper-tab.js';\nimport '@polymer/paper-tabs/paper-tabs.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport scrollToTarget from '../../common/dom/scroll-to-target.js';\n\nimport EventsMixin from '../../mixins/events-mixin.js';\nimport NavigateMixin from '../../mixins/navigate-mixin.js';\n\nimport '../../layouts/ha-app-layout.js';\nimport '../../components/ha-start-voice-button.js';\nimport '../../components/ha-icon.js';\nimport { loadModule, loadCSS, loadJS } from '../../common/dom/load_resource.js';\nimport './components/notifications/hui-notification-drawer.js';\nimport './components/notifications/hui-notifications-button.js';\nimport './hui-unused-entities.js';\nimport './hui-view.js';\nimport debounce from '../../common/util/debounce.js';\n\nimport createCardElement from './common/create-card-element.js';\n\n// CSS and JS should only be imported once. Modules and HTML are safe.\nconst CSS_CACHE = {};\nconst JS_CACHE = {};\n\nclass HUIRoot extends NavigateMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include='ha-style'>\n      :host {\n        -ms-user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n      }\n\n      ha-app-layout {\n        min-height: 100%;\n      }\n      paper-tabs {\n        margin-left: 12px;\n        --paper-tabs-selection-bar-color: var(--text-primary-color, #FFF);\n        text-transform: uppercase;\n      }\n      app-toolbar a {\n        color: var(--text-primary-color, white);\n      }\n      #view {\n        min-height: calc(100vh - 112px);\n        /**\n         * Since we only set min-height, if child nodes need percentage\n         * heights they must use absolute positioning so we need relative\n         * positioning here.\n         *\n         * https://www.w3.org/TR/CSS2/visudet.html#the-height-property\n         */\n        position: relative;\n      }\n      #view.tabs-hidden {\n        min-height: calc(100vh - 64px);\n      }\n      paper-item {\n        cursor: pointer;\n      }\n    </style>\n    <app-route route=\"[[route]]\" pattern=\"/:view\" data=\"{{routeData}}\"></app-route>\n    <hui-notification-drawer\n      hass=\"[[hass]]\"\n      open=\"{{notificationsOpen}}\"\n      narrow=\"[[narrow]]\"\n    ></hui-notification-drawer>\n    <ha-app-layout id=\"layout\">\n      <app-header slot=\"header\" effects=\"waterfall\" fixed condenses>\n        <app-toolbar>\n          <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n          <div main-title>[[_computeTitle(config)]]</div>\n          <hui-notifications-button\n            hass=\"[[hass]]\"\n            notifications-open=\"{{notificationsOpen}}\"\n          ></hui-notifications-button>\n          <ha-start-voice-button hass=\"[[hass]]\"></ha-start-voice-button>\n          <paper-menu-button\n            no-animations\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n          >\n            <paper-icon-button icon=\"hass:dots-vertical\" slot=\"dropdown-trigger\"></paper-icon-button>\n            <paper-listbox on-iron-select=\"_deselect\" slot=\"dropdown-content\">\n              <paper-item on-click=\"_handleRefresh\">Refresh</paper-item>\n              <paper-item on-click=\"_handleUnusedEntities\">Unused entities</paper-item>\n              <paper-item on-click=\"_handleHelp\">Help</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </app-toolbar>\n\n        <div sticky hidden$=\"[[_computeTabsHidden(config.views)]]\">\n          <paper-tabs scrollable selected=\"[[_curView]]\" on-iron-activate=\"_handleViewSelected\">\n            <template is=\"dom-repeat\" items=\"[[config.views]]\">\n              <paper-tab>\n                <template is=\"dom-if\" if=\"[[item.icon]]\">\n                  <ha-icon title$=\"[[item.title]]\" icon=\"[[item.icon]]\"></ha-icon>\n                </template>\n                <template is=\"dom-if\" if=\"[[!item.icon]]\">\n                  [[_computeTabTitle(item.title)]]\n                </template>\n              </paper-tab>\n            </template>\n          </paper-tabs>\n        </div>\n      </app-header>\n\n      <div id='view' on-rebuild-view='_debouncedConfigChanged'></div>\n    </app-header-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      narrow: Boolean,\n      showMenu: Boolean,\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      config: {\n        type: Object,\n        observer: '_configChanged',\n      },\n      columns: {\n        type: Number,\n        observer: '_columnsChanged',\n      },\n\n      _curView: {\n        type: Number,\n        value: 0,\n      },\n\n      route: {\n        type: Object,\n        observer: '_routeChanged'\n      },\n\n      notificationsOpen: {\n        type: Boolean,\n        value: false,\n      },\n\n      routeData: Object,\n    };\n  }\n\n  constructor() {\n    super();\n    this._debouncedConfigChanged = debounce(() => this._selectView(this._curView), 100);\n  }\n\n  _routeChanged(route) {\n    const views = this.config && this.config.views;\n    if (route.path === '' && route.prefix === '/lovelace' && views) {\n      this.navigate(`/lovelace/${views[0].id || 0}`, true);\n    } else if (this.routeData.view) {\n      const view = this.routeData.view;\n      let index = 0;\n      for (let i = 0; i < views.length; i++) {\n        if (views[i].id === view || i === parseInt(view)) {\n          index = i;\n          break;\n        }\n      }\n      if (index !== this._curView) this._selectView(index);\n    }\n  }\n\n  _computeViewId(id, index) {\n    return id || index;\n  }\n\n  _computeTitle(config) {\n    return config.title || 'Home Assistant';\n  }\n\n  _computeTabsHidden(views) {\n    return views.length < 2;\n  }\n\n  _computeTabTitle(title) {\n    return title || 'Unnamed view';\n  }\n\n  _handleRefresh() {\n    this.fire('config-refresh');\n  }\n\n  _handleUnusedEntities() {\n    this._selectView('unused');\n  }\n\n  _deselect(ev) {\n    ev.target.selected = null;\n  }\n\n  _handleHelp() {\n    window.open('https://www.home-assistant.io/lovelace/', '_blank');\n  }\n\n  _handleViewSelected(ev) {\n    const index = ev.detail.selected;\n    if (index !== this._curView) {\n      const id = this.config.views[index].id || index;\n      this.navigate(`/lovelace/${id}`);\n    }\n    scrollToTarget(this, this.$.layout.header.scrollTarget);\n  }\n\n  _selectView(viewIndex) {\n    this._curView = viewIndex;\n\n    // Recreate a new element to clear the applied themes.\n    const root = this.$.view;\n    if (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    let view;\n    let background = this.config.background || '';\n\n    if (viewIndex === 'unused') {\n      view = document.createElement('hui-unused-entities');\n      view.config = this.config;\n    } else {\n      const viewConfig = this.config.views[this._curView];\n      if (viewConfig.panel) {\n        view = createCardElement(viewConfig.cards[0]);\n        view.isPanel = true;\n      } else {\n        view = document.createElement('hui-view');\n        view.config = viewConfig;\n        view.columns = this.columns;\n      }\n      if (viewConfig.background) background = viewConfig.background;\n    }\n\n    this.$.view.style.background = background;\n\n    view.hass = this.hass;\n    root.appendChild(view);\n  }\n\n  _hassChanged(hass) {\n    if (!this.$.view.lastChild) return;\n    this.$.view.lastChild.hass = hass;\n  }\n\n  _configChanged(config) {\n    this._loadResources(config.resources || []);\n    // On config change, recreate the view from scratch.\n    this._selectView(this._curView);\n    this.$.view.classList.toggle('tabs-hidden', config.views.length < 2);\n  }\n\n  _columnsChanged(columns) {\n    if (!this.$.view.lastChild) return;\n    this.$.view.lastChild.columns = columns;\n  }\n\n  _loadResources(resources) {\n    resources.forEach((resource) => {\n      switch (resource.type) {\n        case 'css':\n          if (resource.url in CSS_CACHE) break;\n          CSS_CACHE[resource.url] = loadCSS(resource.url);\n          break;\n\n        case 'js':\n          if (resource.url in JS_CACHE) break;\n          JS_CACHE[resource.url] = loadJS(resource.url);\n          break;\n\n        case 'module':\n          loadModule(resource.url);\n          break;\n\n        case 'html':\n          import(/* webpackChunkName: \"import-href-polyfill\" */ '../../resources/html-import/import-href.js')\n            .then(({ importHref }) => importHref(resource.url));\n          break;\n\n        default:\n          // eslint-disable-next-line\n          console.warn('Unknown resource type specified: ${resource.type}');\n      }\n    });\n  }\n}\ncustomElements.define('hui-root', HUIRoot);\n","/**\n * Scroll to a specific y coordinate.\n *\n * Copied from paper-scroll-header-panel.\n *\n * @method scroll\n * @param {number} top The coordinate to scroll to, along the y-axis.\n * @param {boolean} smooth true if the scroll position should be smoothly adjusted.\n */\nexport default function scrollToTarget(element, target) {\n  // the scroll event will trigger _updateScrollState directly,\n  // However, _updateScrollState relies on the previous `scrollTop` to update the states.\n  // Calling _updateScrollState will ensure that the states are synced correctly.\n  var top = 0;\n  var scroller = target;\n  var easingFn = function easeOutQuad(t, b, c, d) {\n    /* eslint-disable no-param-reassign, space-infix-ops, no-mixed-operators */\n    t /= d;\n    return -c * t*(t-2) + b;\n    /* eslint-enable no-param-reassign, space-infix-ops, no-mixed-operators */\n  };\n  var animationId = Math.random();\n  var duration = 200;\n  var startTime = Date.now();\n  var currentScrollTop = scroller.scrollTop;\n  var deltaScrollTop = top - currentScrollTop;\n  element._currentAnimationId = animationId;\n  (function updateFrame() {\n    var now = Date.now();\n    var elapsedTime = now - startTime;\n    if (elapsedTime > duration) {\n      scroller.scrollTop = top;\n    } else if (element._currentAnimationId === animationId) {\n      scroller.scrollTop = easingFn(elapsedTime, currentScrollTop, deltaScrollTop, duration);\n      requestAnimationFrame(updateFrame.bind(element));\n    }\n  }).call(element);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../../layouts/hass-loading-screen.js';\nimport '../../layouts/hass-error-screen.js';\nimport './hui-root.js';\n\nclass Lovelace extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n        }\n      </style>\n      <template is='dom-if' if='[[_equal(_state, \"loaded\")]]' restamp>\n        <hui-root\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n          hass='[[hass]]'\n          route=\"[[route]]\"\n          config='[[_config]]'\n          columns='[[_columns]]'\n          on-config-refresh='_fetchConfig'\n        ></hui-root>\n      </template>\n      <template is='dom-if' if='[[_equal(_state, \"loading\")]]' restamp>\n        <hass-loading-screen\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n        ></hass-loading-screen>\n      </template>\n      <template is='dom-if' if='[[_equal(_state, \"error\")]]' restamp>\n        <hass-error-screen\n          title='Lovelace'\n          error='[[_errorMsg]]'\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n        >\n          <paper-button on-click=\"_fetchConfig\">Reload ui-lovelace.yaml</paper-button>\n        </hass-error-screen>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      narrow: {\n        type: Boolean,\n        value: false,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      route: Object,\n\n      _columns: {\n        type: Number,\n        value: 1,\n      },\n\n      _state: {\n        type: String,\n        value: 'loading',\n      },\n\n      _errorMsg: String,\n\n      _config: {\n        type: Object,\n        value: null,\n      },\n    };\n  }\n\n  static get observers() {\n    return ['_updateColumns(narrow, showMenu)'];\n  }\n\n  ready() {\n    this._fetchConfig();\n    this._updateColumns = this._updateColumns.bind(this);\n    this.mqls = [300, 600, 900, 1200].map((width) => {\n      const mql = matchMedia(`(min-width: ${width}px)`);\n      mql.addListener(this._updateColumns);\n      return mql;\n    });\n    this._updateColumns();\n    super.ready();\n  }\n\n  _updateColumns() {\n    const matchColumns = this.mqls.reduce((cols, mql) => cols + mql.matches, 0);\n    // Do -1 column if the menu is docked and open\n    this._columns = Math.max(1, matchColumns - (!this.narrow && this.showMenu));\n  }\n\n  async _fetchConfig() {\n    try {\n      const conf = await this.hass.callWS({ type: 'frontend/lovelace_config' });\n      this.setProperties({\n        _config: conf,\n        _state: 'loaded',\n      });\n    } catch (err) {\n      this.setProperties({\n        _state: 'error',\n        _errorMsg: err.message,\n      });\n    }\n  }\n\n  _equal(a, b) {\n    return a === b;\n  }\n}\n\ncustomElements.define('ha-panel-lovelace', Lovelace);\n","// Load a resource and get a promise when loading done.\n// From: https://davidwalsh.name/javascript-loader\n\nfunction _load(tag, url, type) {\n  // This promise will be used by Promise.all to determine success or failure\n  return new Promise(function (resolve, reject) {\n    const element = document.createElement(tag);\n    let attr = 'src';\n    let parent = 'body';\n\n    // Important success and error for the promise\n    element.onload = () => resolve(url);\n    element.onerror = () => reject(url);\n\n    // Need to set different attributes depending on tag type\n    switch (tag) {\n      case 'script':\n        element.async = true;\n        if (type) {\n          element.type = type;\n        }\n        break;\n      case 'link':\n        element.type = 'text/css';\n        element.rel = 'stylesheet';\n        attr = 'href';\n        parent = 'head';\n    }\n\n    // Inject into document to kick off loading\n    element[attr] = url;\n    document[parent].appendChild(element);\n  });\n}\n\nexport const loadCSS = url => _load('link', url);\nexport const loadJS = url => _load('script', url);\nexport const loadImg = url => _load('img', url);\nexport const loadModule = url => _load('script', url, 'module');\n"],"sourceRoot":""}